!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.Ractive=b()}(this,function(){"use strict";function v(a){var b;if(a&&"boolean"!=typeof a)return"undefined"!=typeof window&&document&&a?a.nodeType?a:"string"==typeof a&&(b=document.getElementById(a),!b&&document.querySelector&&(b=document.querySelector(a)),b&&b.nodeType)?b:a[0]&&a[0].nodeType?a[0]:null:null}function w(a){return a&&"unknown"!=typeof a.parentNode&&a.parentNode&&a.parentNode.removeChild(a),a}function x(a){return null!=a&&a.toString?a:""}function C(a){var b,c,d,e,f;for(b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];for(;f=c.shift();)for(e in f)E.call(f,e)&&(a[e]=f[e]);return a}function D(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];return c.forEach(function(b){for(var c in b)!b.hasOwnProperty(c)||c in a||(a[c]=b[c])}),a}function H(a){return"[object Array]"===F.call(a)}function I(a){return G.test(F.call(a))}function J(a,b){return null===a&&null===b?!0:"object"==typeof a||"object"==typeof b?!1:a===b}function K(a){return!isNaN(parseFloat(a))&&isFinite(a)}function L(a){return a&&"[object Object]"===F.call(a)}function R(a,b){return a.replace(/%s/g,function(){return b.shift()})}function S(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];throw a=R(a,c),new Error(a)}function T(){Ds.DEBUG&&O.apply(null,arguments)}function U(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];a=R(a,c),P(a,c)}function V(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];a=R(a,c),N[a]||(N[a]=!0,P(a,c))}function W(){Ds.DEBUG&&U.apply(null,arguments)}function X(){Ds.DEBUG&&V.apply(null,arguments)}function _(a,b,c){var d=ab(a,b,c);return d?d[a][c]:null}function ab(a,b,c){for(;b;){if(c in b[a])return b;if(b.isolated)return null;b=b.parent}}function cb(a){return function(){return a}}function fb(a){var b,c,d,e,f,g;for(b=a.split("."),(c=eb[b.length])||(c=gb(b.length)),f=[],d=function(a,c){return a?"*":b[c]},e=c.length;e--;)g=c[e].map(d).join("."),f.hasOwnProperty(g)||(f.push(g),f[g]=!0);return f}function gb(a){var c,d,e,f,g,b="";if(!eb[a]){for(e=[];b.length<a;)b+=1;for(c=parseInt(b,2),f=function(a){return"1"===a},g=0;c>=g;g+=1){for(d=g.toString(2);d.length<a;)d="0"+d;e[g]=Array.prototype.map.call(d,f)}eb[a]=e}return eb[a]}function lb(a,b,c,d){var e=a[b];if(!e||!e.equalsOrStartsWith(d)&&e.equalsOrStartsWith(c))return a[b]=e?e.replace(c,d):d,!0}function mb(a){var b=a.slice(2);return"i"===a[1]?K(b)?+b:b:b}function nb(a){return null==a?a:(jb.hasOwnProperty(a)||(jb[a]=new kb(a)),jb[a])}function ob(a,b){function f(b,c){var d,e,f;return c.isRoot?f=[].concat(Object.keys(a.viewmodel.data),Object.keys(a.viewmodel.mappings),Object.keys(a.viewmodel.computations)):(d=a.viewmodel.wrapped[c.str],e=d?d.get():a.viewmodel.get(c),f=e?Object.keys(e):null),f&&f.forEach(function(a){"_ractive"===a&&H(e)||b.push(c.join(a))}),b}var c,d,e;for(c=b.str.split("."),e=[rb];d=c.shift();)"*"===d?e=e.reduce(f,[]):e[0]===rb?e[0]=nb(d):e=e.map(pb(d));return e}function pb(a){return function(b){return b.join(a)}}function qb(a){return a?a.replace(hb,".$1"):""}function tb(a,b,c){if("string"!=typeof b||!K(c))throw new Error("Bad arguments");var d=void 0,e=void 0;if(/\*/.test(b))return e={},ob(a,nb(qb(b))).forEach(function(b){var d=a.viewmodel.get(b);if(!K(d))throw new Error(sb);e[b.str]=d+c}),a.set(e);if(d=a.get(b),!K(d))throw new Error(sb);return a.set(b,+d+c)}function vb(a,b){return tb(this,a,void 0===b?1:+b)}function Ab(a){this.event=a,this.method="on"+a,this.deprecate=zb[a]}function Bb(a,b){var c=a.indexOf(b);-1===c&&a.push(b)}function Cb(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]==b)return!0;return!1}function Db(a,b){var c;if(!H(a)||!H(b))return!1;if(a.length!==b.length)return!1;for(c=a.length;c--;)if(a[c]!==b[c])return!1;return!0}function Eb(a){return"string"==typeof a?[a]:void 0===a?[]:a}function Fb(a){return a[a.length-1]}function Gb(a,b){var c=a.indexOf(b);-1!==c&&a.splice(c,1)}function Hb(a){for(var b=[],c=a.length;c--;)b[c]=a[c];return b}function Nb(a){setTimeout(a,0)}function Ob(a,b){return function(){for(var c;c=a.shift();)c(b)}}function Pb(a,b,c,d){var e,g,h,i;if(b===a)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(b instanceof Ib)b.then(c,d);else if(!b||"object"!=typeof b&&"function"!=typeof b)c(b);else{try{e=b.then}catch(f){return d(f),void 0}if("function"==typeof e){h=function(b){g||(g=!0,Pb(a,b,c,d))},i=function(a){g||(g=!0,d(a))};try{e.call(b,h,i)}catch(f){if(!g)return d(f),g=!0,void 0}}else c(b)}}function Rb(a,b,c){var d;return b=qb(b),"~/"===b.substr(0,2)?(d=nb(b.substring(2)),Ub(a,d.firstKey,c)):"."===b[0]?(d=Sb(Qb(c),b),d&&Ub(a,d.firstKey,c)):d=Tb(a,nb(b),c),d}function Sb(a,b){var c;if(void 0!=a&&"string"!=typeof a&&(a=a.str),"."===b)return nb(a);if(c=a?a.split("."):[],"../"===b.substr(0,3)){for(;"../"===b.substr(0,3);){if(!c.length)throw new Error('Could not resolve reference - too many "../" prefixes');c.pop(),b=b.substring(3)}return c.push(b),nb(c.join("."))}return a?nb(a+b.replace(/^\.\//,".")):nb(b.replace(/^\.\/?/,""))}function Tb(a,b,c,d){var e,f,g,h,i;if(b.isRoot)return b;for(f=b.firstKey;c;)if(e=c.context,c=c.parent,e&&(h=!0,g=a.viewmodel.get(e),g&&("object"==typeof g||"function"==typeof g)&&f in g))return e.join(b.str);return Vb(a.viewmodel,f)?b:a.parent&&!a.isolated&&(h=!0,c=a.component.parentFragment,f=nb(f),i=Tb(a.parent,f,c,!0))?(a.viewmodel.map(f,{origin:a.parent.viewmodel,keypath:i}),b):d||h?void 0:(a.viewmodel.set(b,void 0),b)}function Ub(a,b){var c;!a.parent||a.isolated||Vb(a.viewmodel,b)||(b=nb(b),(c=Tb(a.parent,b,a.component.parentFragment,!0))&&a.viewmodel.map(b,{origin:a.parent.viewmodel,keypath:c}))}function Vb(a,b){return""===b||b in a.data||b in a.computations||b in a.mappings}function Wb(a){a.teardown()}function Xb(a){a.unbind()}function Yb(a){a.unrender()}function $b(a){a.detach()}function _b(a){a.detachNodes()}function ac(a){!a.ready||a.outros.length||a.outroChildren||(a.outrosComplete||(a.parent?a.parent.decrementOutros(a):a.detachNodes(),a.outrosComplete=!0),a.intros.length||a.totalChildren||("function"==typeof a.callback&&a.callback(),a.parent&&a.parent.decrementTotal()))}function fc(){for(var a,b,c;bc.ractives.length;)b=bc.ractives.pop(),c=b.viewmodel.applyChanges(),c&&ec.fire(b,c);for(gc(),a=0;a<bc.views.length;a+=1)bc.views[a].update();for(bc.views.length=0,a=0;a<bc.tasks.length;a+=1)bc.tasks[a]();return bc.tasks.length=0,bc.ractives.length?fc():void 0}function gc(){var a,b,c,d;for(a=dc.length;a--;)b=dc[a],b.keypath?dc.splice(a,1):(c=Rb(b.root,b.ref,b.parentFragment))&&((d||(d=[])).push({item:b,keypath:c}),dc.splice(a,1));d&&d.forEach(hc)}function hc(a){a.item.resolve(a.keypath)}function oc(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q;if(d=new Mb(function(a){return e=a}),"object"==typeof a){c=b||{},i=c.easing,j=c.duration,h=[],k=c.step,l=c.complete,(k||l)&&(n={},c.step=null,c.complete=null,m=function(a){return function(b,c){n[a]=c}});for(f in a)a.hasOwnProperty(f)&&((k||l)&&(o=m(f),c={easing:i,duration:j},k&&(c.step=o)),c.complete=l?o:M,h.push(pc(this,f,a[f],c)));return q={easing:i,duration:j},k&&(q.step=function(a){return k(a,n)}),l&&d.then(function(a){return l(a,n)}),q.complete=e,p=pc(this,null,null,q),h.push(p),d.stop=function(){for(var a;a=h.pop();)a.stop();p&&p.stop()},d}return c=c||{},c.complete&&d.then(c.complete),c.complete=e,g=pc(this,a,b,c),d.stop=function(){return g.stop()},d}function pc(a,b,c,d){var e,f,g,h;return b&&(b=nb(qb(b))),null!==b&&(h=a.viewmodel.get(b)),kc.abort(b,a),J(h,c)?(d.complete&&d.complete(d.to),nc):(d.easing&&(e="function"==typeof d.easing?d.easing:a.easing[d.easing],"function"!=typeof e&&(e=null)),f=void 0===d.duration?400:d.duration,g=new lc({keypath:b,from:h,to:c,root:a,duration:f,easing:e,interpolator:d.interpolator,step:d.step,complete:d.complete}),kc.add(g),a._animations.push(g),g)}function sc(){return this.detached?this.detached:(this.el&&Gb(this.el.__ractive_instances__,this),this.detached=this.fragment.detach(),rc.fire(this),this.detached)}function uc(a){return this.el?this.fragment.find(a):null}function wc(a,b){var c;return c=this._isComponentQuery?!this.selector||a.name===this.selector:a.node?n(a.node,this.selector):null,c?(this.push(a.node||a.instance),b||this._makeDirty(),!0):void 0}function zc(a){var b;return(b=a.parentFragment)?b.owner:a.component&&(b=a.component.parentFragment)?b.owner:void 0}function Ac(a){var b,c;for(b=[a],c=zc(a);c;)b.push(c),c=zc(c);return b}function Fc(a,b,c,d){var e=[];return A(e,{selector:{value:b},live:{value:c},_isComponentQuery:{value:d},_test:{value:vc}}),c?(A(e,{cancel:{value:xc},_root:{value:a},_sort:{value:Cc},_makeDirty:{value:Dc},_remove:{value:Ec},_dirty:{value:!1,writable:!0}}),e):e}function Hc(a,b){var c,d;return this.el?(b=b||{},c=this._liveQueries,(d=c[a])?b&&b.live?d:d.slice():(d=Fc(this,a,!!b.live,!1),d.live&&(c.push(a),c["_"+a]=d),this.fragment.findAll(a,d),d)):[]}function Jc(a,b){var c,d;return b=b||{},c=this._liveComponentQueries,(d=c[a])?b&&b.live?d:d.slice():(d=Fc(this,a,!!b.live,!0),d.live&&(c.push(a),c["_"+a]=d),this.fragment.findAllComponents(a,d),d)}function Lc(a){return this.fragment.findComponent(a)}function Nc(a){return this.container?this.container.component&&this.container.component.name===a?this.container:this.container.findContainer(a):null}function Pc(a){return this.parent?this.parent.component&&this.parent.component.name===a?this.parent:this.parent.findParent(a):null}function Rc(a,b){var d,c=void 0===arguments[2]?{}:arguments[2];b&&(c.event?c.event.name=b:c.event={name:b,_noArg:!0},d=nb(b).wildcardMatches(),Sc(a,d,c.event,c.args,!0))}function Sc(a,b,c,d){var f,g,i,e=void 0===arguments[4]?!1:arguments[4],h=!0;for(Qc.enqueue(a,c),g=b.length;g>=0;g--)f=a._subs[b[g]],f&&(h=Tc(a,f,c,d)&&h);Qc.dequeue(a),a.parent&&h&&(e&&a.component&&(i=a.component.name+"."+b[b.length-1],b=nb(i).wildcardMatches(),c&&(c.component=a)),Sc(a.parent,b,c,d))}function Tc(a,b,c,d){var g,h,e=null,f=!1;for(c&&!c._noArg&&(d=[c].concat(d)),b=b.slice(),g=0,h=b.length;h>g;g+=1)b[g].apply(a,d)===!1&&(f=!0);return c&&!c._noArg&&f&&(e=c.original)&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()),!f}function Vc(a){var b={args:Array.prototype.slice.call(arguments,1)};Rc(this,a,b)}function Yc(a){var b;return a=nb(qb(a)),b=this.viewmodel.get(a,Xc),void 0===b&&this.parent&&!this.isolated&&Rb(this,a.str,this.component.parentFragment)&&(b=this.viewmodel.get(a)),b}function _c(a,b){if(!this.fragment.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(a=v(a),b=v(b)||null,!a)throw new Error("You must specify a valid target to insert into");a.insertBefore(this.detach(),b),this.el=a,(a.__ractive_instances__||(a.__ractive_instances__=[])).push(this),this.detached=null,ad(this)}function ad(a){$c.fire(a),a.findAllComponents("*").forEach(function(a){ad(a.instance)})}function cd(a,b,c){var d,e;return a=nb(qb(a)),d=this.viewmodel.get(a),H(d)&&H(b)?(e=cc.start(this,!0),this.viewmodel.merge(a,d,b,c),cc.end(),e):this.set(a,b,c&&c.complete)}function ed(a,b){var c,d;return c=ob(a,b),d={},c.forEach(function(b){d[b.str]=a.get(b.str)}),d}function id(a,b,c,d){var e,f,g;return b=nb(qb(b)),d=d||hd,b.isPattern?(e=new fd(a,b,c,d),a.viewmodel.patternObservers.push(e),f=!0):e=new dd(a,b,c,d),e.init(d.init),a.viewmodel.register(b,e,f?"patternObservers":"observers"),e.ready=!0,{cancel:function(){var c;g||(f?(c=a.viewmodel.patternObservers.indexOf(e),a.viewmodel.patternObservers.splice(c,1),a.viewmodel.unregister(b,e,"patternObservers")):a.viewmodel.unregister(b,e,"observers"),g=!0)}}}function kd(a,b,c){var d,e,f,g;if(L(a)){c=b,e=a,d=[];for(a in e)e.hasOwnProperty(a)&&(b=e[a],d.push(this.observe(a,b,c)));return{cancel:function(){for(;d.length;)d.pop().cancel()}}}if("function"==typeof a)return c=b,b=a,a="",id(this,a,b,c);if(f=a.split(" "),1===f.length)return id(this,a,b,c);for(d=[],g=f.length;g--;)a=f[g],a&&d.push(id(this,a,b,c));return{cancel:function(){for(;d.length;)d.pop().cancel()}}}function md(a,b,c){var d=this.observe(a,function(){b.apply(this,arguments),d.cancel()},{init:!1,defer:c&&c.defer});return d}function qd(a,b){var d,c=this;if(a)d=a.split(" ").map(nd).filter(od),d.forEach(function(a){var d,e;(d=c._subs[a])&&(b?(e=d.indexOf(b),-1!==e&&d.splice(e,1)):c._subs[a]=[])});else for(a in this._subs)delete this._subs[a];return this}function sd(a,b){var d,e,f,c=this;if("object"==typeof a){d=[];for(e in a)a.hasOwnProperty(e)&&d.push(this.on(e,a[e]));return{cancel:function(){for(var a;a=d.pop();)a.cancel()}}}return f=a.split(" ").map(nd).filter(od),f.forEach(function(a){(c._subs[a]||(c._subs[a]=[])).push(b)}),{cancel:function(){return c.off(a,b)}}}function ud(a,b){var c=this.on(a,function(){b.apply(this,arguments),c.cancel()});return c}function vd(a,b,c){var d,e,g,h,i,j,f=[];if(d=wd(a,b,c),!d)return null;for(e=a.length,i=d.length-2-d[1],g=Math.min(e,d[0]),h=g+d[1],j=0;g>j;j+=1)f.push(j);for(;h>j;j+=1)f.push(-1);for(;e>j;j+=1)f.push(j+i);return f.touchedFrom=0!==i?d[0]:a.length,f}function wd(a,b,c){switch(b){case"splice":for(void 0!==c[0]&&c[0]<0&&(c[0]=a.length+Math.max(c[0],-a.length));c.length<2;)c.push(0);return c[1]=Math.min(c[1],a.length-c[0]),c;case"sort":case"reverse":return null;case"pop":return a.length?[a.length-1,1]:[0,0];case"push":return[a.length,0].concat(c);case"shift":return[0,a.length?1:0];case"unshift":return[0,0].concat(c)}}function Nd(a,b){var d,e,g,c=this,f=this.transitionsEnabled;if(this.noIntro&&(this.transitionsEnabled=!1),d=cc.start(this,!0),cc.scheduleTask(function(){return Ld.fire(c)},!0),this.fragment.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");return a=v(a)||this.el,b=v(b)||this.anchor,this.el=a,this.anchor=b,!this.append&&a&&(g=a.__ractive_instances__,g&&g.length&&Od(g),a.innerHTML=""),this.cssId&&Bd.apply(),a&&((e=a.__ractive_instances__)?e.push(this):a.__ractive_instances__=[this],b?a.insertBefore(this.fragment.render(),b):a.appendChild(this.fragment.render())),cc.end(),this.transitionsEnabled=f,d.then(function(){return Md.fire(c)})}function Od(a){a.splice(0,a.length).forEach(Wb)}function Qd(a,b){for(var c=a.slice(),d=b.length;d--;)~c.indexOf(b[d])||c.push(b[d]);return c}function Wd(a,b){var c,d,e;return d='[data-ractive-css~="{'+b+'}"]',e=function(a){var b,c,e,f,g,h,i,j=[];for(b=[];c=Td.exec(a);)b.push({str:c[0],base:c[1],modifiers:c[2]});for(f=b.map(Yd),i=b.length;i--;)h=f.slice(),e=b[i],h[i]=e.base+d+e.modifiers||"",g=f.slice(),g[i]=d+" "+g[i],j.push(h.join(" "),g.join(" "));return j.join(", ")},c=Vd.test(a)?a.replace(Vd,d):a.replace(Sd,"").replace(Rd,function(a,b){var c,d;return Ud.test(b)?a:(c=b.split(",").map(Xd),d=c.map(e).join(", ")+" ",a.replace(b,d))})}function Xd(a){return a.trim?a.trim():a.replace(/^\s+/,"").replace(/\s+$/,"")}function Yd(a){return a.str}function _d(a){a&&a.constructor!==Object&&("function"==typeof a||("object"!=typeof a?S("data option must be an object or a function, `"+a+"` is not valid"):W("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged")))}function be(a,b){var c,d;return _d(b),c="function"==typeof a,d="function"==typeof b,b||c||(b={}),c||d?function(){var e=d?ce(b,this):b,f=c?ce(a,this):a;return de(e,f)}:de(b,a)}function ce(a,b){var c=a.call(b);if(c)return"object"!=typeof c&&S("Data function must return an object"),c.constructor!==Object&&X("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged"),c}function de(a,b){if(a&&b){for(var c in b)c in a||(a[c]=b[c]);return a}return a||b}function We(a){var b,c,d;return a.matchString("=")?(b=a.pos,a.allowWhitespace(),(c=a.matchPattern(Ue))?a.matchPattern(Ve)?(d=a.matchPattern(Ue))?(a.allowWhitespace(),a.matchString("=")?[c,d]:(a.pos=b,null)):(a.pos=b,null):null:(a.pos=b,null)):null}function Ze(a){var b;return(b=a.matchPattern(Ye))?{t:Ce,v:b}:null}function _e(a){var b,c;if(a.interpolate[a.inside]===!1)return null;for(c=0;c<a.tags.length;c+=1)if(b=af(a,a.tags[c]))return b}function af(a,b){var d,e,f,g,c=a.pos;if(a.matchString("\\"+b.open)){if(0===c||"\\"!==a.str[c-1])return b.open}else if(!a.matchString(b.open))return null;if(d=We(a))return a.matchString(b.close)?(b.open=d[0],b.close=d[1],a.sortMustacheTags(),$e):null;for(a.allowWhitespace(),a.matchString("/")&&(a.pos-=1,g=a.pos,Xe(a)?a.pos=g:(a.pos=g-b.close.length,a.error("Attempted to close a section that wasn't open"))),f=0;f<b.readers.length;f+=1)if(e=b.readers[f],d=e(a,b))return b.isStatic&&(d.s=!0),a.includeLinePositions&&(d.p=a.getLinePos(c)),d;return a.pos=c,null}function ff(a){var b;return(b=a.matchPattern(ef))?{t:xe,v:b}:null}function gf(a){var b=a.remaining();return"true"===b.substr(0,4)?(a.pos+=4,{t:Be,v:"true"}):"false"===b.substr(0,5)?(a.pos+=5,{t:Be,v:"false"}):null}function rf(a){var b;return(b=of(a))?qf.test(b.v)?b.v:'"'+b.v.replace(/"/g,'\\"')+'"':(b=df(a))?b.v:(b=a.matchPattern(pf))?b:void 0}function tf(a){var b,c,d;return b=a.pos,a.allowWhitespace(),c=rf(a),null===c?(a.pos=b,null):(a.allowWhitespace(),a.matchString(":")?(a.allowWhitespace(),d=Qf(a),null===d?(a.pos=b,null):{t:Ee,k:c,v:d}):(a.pos=b,null))}function uf(a){var b,c,d,e;return b=a.pos,d=sf(a),null===d?null:(c=[d],a.matchString(",")?(e=uf(a),e?c.concat(e):(a.pos=b,null)):c)}function wf(a){function f(a){c.push(a)}var b,c,d,e;return b=a.pos,a.allowWhitespace(),d=Qf(a),null===d?null:(c=[d],a.allowWhitespace(),a.matchString(",")&&(e=wf(a),null===e&&a.error(bf),e.forEach(f)),c)}function yf(a){return df(a)||gf(a)||of(a)||vf(a)||xf(a)||Xe(a)}function Ef(a){var b,c,d,e,f,g;return b=a.pos,d=a.matchPattern(/^@(?:keypath|index|key)/),d||(c=a.matchPattern(zf)||"",d=!c&&a.relaxedNames&&a.matchPattern(Df)||a.matchPattern(Cf),d||"."!==c||(c="",d=".")),d?c||a.relaxedNames||!Bf.test(d)?!c&&Af.test(d)?(e=Af.exec(d)[0],a.pos=b+e.length,{t:De,v:e}):(f=(c||"")+qb(d),a.matchString("(")&&(g=f.lastIndexOf("."),-1!==g?(f=f.substr(0,g),a.pos=b+f.length):a.pos-=1),{t:Fe,n:f.replace(/^this\./,"./").replace(/^this$/,".")}):(a.pos=b,null):null}function Ff(a){var b,c;return b=a.pos,a.matchString("(")?(a.allowWhitespace(),c=Qf(a),c||a.error(bf),a.allowWhitespace(),a.matchString(")")||a.error(cf),{t:Je,x:c}):null}function Hf(a){var b,c,d;if(b=a.pos,a.allowWhitespace(),a.matchString(".")){if(a.allowWhitespace(),c=a.matchPattern(pf))return{t:Ge,n:c};a.error("Expected a property name")}return a.matchString("[")?(a.allowWhitespace(),d=Qf(a),d||a.error(bf),a.allowWhitespace(),a.matchString("]")||a.error("Expected ']'"),{t:Ge,x:d}):null}function Pf(a){var b,c,d,e;return(c=Mf(a))?(b=a.pos,a.allowWhitespace(),a.matchString("?")?(a.allowWhitespace(),d=Qf(a),d||a.error(bf),a.allowWhitespace(),a.matchString(":")||a.error('Expected ":"'),a.allowWhitespace(),e=Qf(a),e||a.error(bf),{t:Ke,o:[c,d,e]}):(a.pos=b,c)):null}function Qf(a){return Of(a)}function Rf(a){function c(a){switch(a.t){case Be:case De:case xe:case Ce:return a.v;case ye:return JSON.stringify(String(a.v));case ze:return"["+(a.m?a.m.map(c).join(","):"")+"]";case Ae:return"{"+(a.m?a.m.map(c).join(","):"")+"}";case Ee:return a.k+":"+c(a.v);case Ie:return("typeof"===a.s?"typeof ":a.s)+c(a.o);case Le:return c(a.o[0])+("in"===a.s.substr(0,2)?" "+a.s+" ":a.s)+c(a.o[1]);case Me:return c(a.x)+"("+(a.o?a.o.map(c).join(","):"")+")";case Je:return"("+c(a.x)+")";case He:return c(a.x)+c(a.r);case Ge:return a.n?"."+a.n:"["+c(a.x)+"]";case Ke:return c(a.o[0])+"?"+c(a.o[1])+":"+c(a.o[2]);case Fe:return"_"+b.indexOf(a.n);default:throw new Error("Expected legal JavaScript")}}var b;return Sf(a,b=[]),{r:b,s:c(a)}}function Sf(a,b){var c,d;if(a.t===Fe&&-1===b.indexOf(a.n)&&b.unshift(a.n),d=a.o||a.m)if(L(d))Sf(d,b);else for(c=d.length;c--;)Sf(d[c],b);a.x&&Sf(a.x,b),a.r&&Sf(a.r,b),a.v&&Sf(a.v,b)}function Uf(a,b){var c;if(a){for(;a.t===Je&&a.x;)a=a.x;return a.t===Fe?b.r=a.n:a.t===xe&&Tf.test(a.v)?b.r=a.v:(c=Vf(a))?b.rx=c:b.x=Rf(a),b}}function Vf(a){for(var c,b=[];a.t===He&&a.r.t===Ge;)c=a.r,c.x?c.x.t===Fe?b.unshift(c.x):b.unshift(Rf(c.x)):b.unshift(c.n),a=a.x;return a.t!==Fe?null:{r:a.n,m:b}}function Wf(a,b){var d,c=Qf(a);return c?(a.matchString(b.close)||a.error("Expected closing delimiter '"+b.close+"'"),d={t:je},Uf(c,d),d):null}function Xf(a,b){var c,d;return a.matchString("&")?(a.allowWhitespace(),(c=Qf(a))?(a.matchString(b.close)||a.error("Expected closing delimiter '"+b.close+"'"),d={t:je},Uf(c,d),d):null):null}function Yf(a,b){var c,d,e,f,g;return c=a.pos,a.matchString(">")?(a.allowWhitespace(),d=a.pos,a.relaxedNames=!0,e=Qf(a),a.relaxedNames=!1,a.allowWhitespace(),f=Qf(a),a.allowWhitespace(),e?(g={t:oe},Uf(e,g),a.allowWhitespace(),f&&(g={t:ke,n:Qe,f:[g]},Uf(f,g)),a.matchString(b.close)||a.error("Expected closing delimiter '"+b.close+"'"),g):null):null}function $f(a,b){var c;return a.matchString("!")?(c=a.remaining().indexOf(b.close),-1!==c?(a.pos+=c+b.close.length,{t:pe}):void 0):null}function _f(a,b){var c,d,e;if(c=a.pos,d=Qf(a),!d)return null;for(e=0;e<b.length;e+=1)if(a.remaining().substr(0,b[e].length)===b[e])return d;return a.pos=c,Ef(a)}function ag(a,b){var c,d,e,f;c=a.pos;try{d=_f(a,[b.close])}catch(g){f=g}if(!d){if("!"===a.str.charAt(c))return a.pos=c,null;if(f)throw f}if(!a.matchString(b.close)&&(a.error("Expected closing delimiter '"+b.close+"' after reference"),!d)){if("!"===a.nextChar())return null;a.error("Expected expression or legal reference")}return e={t:ie},Uf(d,e),e}function cg(a,b){var c,d,e;return a.matchPattern(bg)?(c=a.pos,d=a.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/),a.allowWhitespace(),a.matchString(b.close)||a.error("expected legal partial name"),e={t:ue},d&&(e.n=d),e):null}function dg(a,b){var c,d,e,f;return c=a.pos,a.matchString(b.open)?(a.allowWhitespace(),a.matchString("/")?(a.allowWhitespace(),d=a.remaining(),e=d.indexOf(b.close),-1!==e?(f={t:me,r:d.substr(0,e).split(" ")[0]},a.pos+=e,a.matchString(b.close)||a.error("Expected closing delimiter '"+b.close+"'"),f):(a.pos=c,null)):(a.pos=c,null)):null}function gg(a,b){var c=a.pos;return a.matchString(b.open)?a.matchPattern(fg)?(a.matchString(b.close)||a.error("Expected closing delimiter '"+b.close+"'"),{t:Se}):(a.pos=c,null):null}function jg(a,b){var d,c=a.pos;return a.matchString(b.open)?a.matchPattern(ig)?(d=Qf(a),a.matchString(b.close)||a.error("Expected closing delimiter '"+b.close+"'"),{t:Te,x:d}):(a.pos=c,null):null}function og(a,b){var d,e,f,g,h,i,j,k,l,m,n,o,c=a.pos;if(a.matchString("^"))e={t:ke,f:[],n:Oe};else{if(!a.matchString("#"))return null;e={t:ke,f:[]},a.matchString("partial")&&(a.pos=c-a.standardDelimiters[0].length,a.error("Partial definitions can only be at the top level of the template, or immediately inside components")),(i=a.matchPattern(ng))&&(n=i,e.n=kg[i])}a.allowWhitespace(),d=Qf(a),d||a.error("Expected expression"),(m=a.matchPattern(lg))&&(o=void 0,e.i=(o=a.matchPattern(mg))?m+","+o:m),a.allowWhitespace(),a.matchString(b.close)||a.error("Expected closing delimiter '"+b.close+"'"),a.sectionDepth+=1,g=e.f,k=[];do if(f=dg(a,b))n&&f.r!==n&&a.error("Expected "+b.open+"/"+n+b.close),a.sectionDepth-=1,l=!0;else if(f=hg(a,b))e.n===Oe&&a.error("{{else}} not allowed in {{#unless}}"),h&&a.error("illegal {{elseif...}} after {{else}}"),j||(j=pg(d,e.n)),j.f.push({t:ke,n:Ne,x:Rf(rg(k.concat(f.x))),f:g=[]}),k.push(qg(f.x));else if(f=eg(a,b))e.n===Oe&&a.error("{{else}} not allowed in {{#unless}}"),h&&a.error("there can only be one {{else}} block, at the end of a section"),h=!0,j?j.f.push({t:ke,n:Ne,x:Rf(rg(k)),f:g=[]}):(j=pg(d,e.n),g=j.f);else{if(f=a.read(Rh),!f)break;g.push(f)}while(!l);return j&&(e.n===Qe&&(e.n=Re),e.l=j),Uf(d,e),e.f.length||delete e.f,e}function pg(a,b){var c;return b===Qe?(c={t:ke,n:Ne,f:[]},Uf(qg(a),c)):(c={t:ke,n:Oe,f:[]},Uf(a,c)),c}function qg(a){return a.t===Ie&&"!"===a.s?a.o:{t:Ie,s:"!",o:sg(a)}}function rg(a){return 1===a.length?a[0]:{t:Le,s:"&&",o:[sg(a[0]),sg(rg(a.slice(1)))]}}function sg(a){return{t:Je,x:a}}function vg(a){var b,c,d,e,f;return b=a.pos,a.matchString(tg)?(d=a.remaining(),e=d.indexOf(ug),-1===e&&a.error("Illegal HTML - expected closing comment sequence ('-->')"),c=d.substr(0,e),a.pos+=e+3,f={t:pe,c:c},a.includeLinePositions&&(f.p=a.getLinePos(b)),f):null}function Eg(a){return a.replace(Ag,function(a,b){var c;return c="#"!==b[0]?yg[b]:"x"===b[1]?parseInt(b.substring(2),16):parseInt(b.substring(1),10),c?String.fromCharCode(Fg(c)):a})}function Fg(a){return a?10===a?32:128>a?a:159>=a?zg[a-128]:55296>a?a:57343>=a?65533:65535>=a?a:65533:65533}function Gg(a){return a.replace(Dg,"&amp;").replace(Bg,"&lt;").replace(Cg,"&gt;")}function Kg(a){return"string"==typeof a}function Lg(a){return a.t===pe||a.t===qe}function Mg(a){return(a.t===ke||a.t===le)&&a.f}function Ug(a,b,c,d,e){var f,g,h,i,j,k,l,m;for(Jg(a),f=a.length;f--;)g=a[f],g.exclude?a.splice(f,1):b&&g.t===pe&&a.splice(f,1);for(Pg(a,d,e),f=a.length;f--;){if(g=a[f],g.f&&(j=c||g.t===ne&&Rg.test(g.e),j||(h=a[f-1],i=a[f+1],(!h||"string"==typeof h&&Tg.test(h))&&(k=!0),(!i||"string"==typeof i&&Sg.test(i))&&(l=!0)),Ug(g.f,b,j,k,l)),g.l&&(Ug(g.l.f,b,c,k,l),a.splice(f+1,0,g.l),delete g.l),g.a)for(m in g.a)g.a.hasOwnProperty(m)&&"string"!=typeof g.a[m]&&Ug(g.a[m],b,c,k,l);if(g.m&&Ug(g.m,b,c,k,l),g.v)for(m in g.v)g.v.hasOwnProperty(m)&&(H(g.v[m].n)&&Ug(g.v[m].n,b,c,k,l),H(g.v[m].d)&&Ug(g.v[m].d,b,c,k,l))}for(f=a.length;f--;)"string"==typeof a[f]&&("string"==typeof a[f+1]&&(a[f]=a[f]+a[f+1],a.splice(f+1,1)),c||(a[f]=a[f].replace(Qg," ")),""===a[f]&&a.splice(f,1))}function Wg(a){var b,c;return b=a.pos,a.matchString("</")?(c=a.matchPattern(Vg))?a.inside&&c!==a.inside?(a.pos=b,null):{t:se,e:c}:(a.pos-=2,a.error("Illegal closing tag"),void 0):null}function $g(a){var b,c,d;return a.allowWhitespace(),(c=a.matchPattern(Yg))?(b={name:c},d=_g(a),null!=d&&(b.value=d),b):null}function _g(a){var b,c,d,e;return b=a.pos,/[=\/>\s]/.test(a.nextChar())||a.error("Expected `=`, `/`, `>` or whitespace"),a.allowWhitespace(),a.matchString("=")?(a.allowWhitespace(),c=a.pos,d=a.sectionDepth,e=ch(a,"'")||ch(a,'"')||bh(a),null===e&&a.error("Expected valid attribute value"),a.sectionDepth!==d&&(a.pos=c,a.error("An attribute value must contain as many opening section tags as closing section tags")),e.length?1===e.length&&"string"==typeof e[0]?Eg(e[0]):e:""):(a.pos=b,null)}function ah(a){var b,c,d,e,f;return b=a.pos,(c=a.matchPattern(Zg))?(d=c,e=a.tags.map(function(a){return a.open}),-1!==(f=Xg(d,e))&&(c=c.substr(0,f),a.pos=b+c.length),c):null}function bh(a){var b,c;for(a.inAttribute=!0,b=[],c=_e(a)||ah(a);null!==c;)b.push(c),c=_e(a)||ah(a);return b.length?(a.inAttribute=!1,b):null}function ch(a,b){var c,d,e;if(c=a.pos,!a.matchString(b))return null;for(a.inAttribute=b,d=[],e=_e(a)||dh(a,b);null!==e;)d.push(e),e=_e(a)||dh(a,b);return a.matchString(b)?(a.inAttribute=!1,d):(a.pos=c,null)}function dh(a,b){var c,d,e,f;return c=a.pos,e=a.remaining(),f=a.tags.map(function(a){return a.open}),f.push(b),d=Xg(e,f),-1===d&&a.error("Quoted attribute value must have a closing quote"),d?(a.pos+=d,e.substr(0,d)):null}function lh(a){var b,c,d;return a.allowWhitespace(),(b=rf(a))?(d={key:b},a.allowWhitespace(),a.matchString(":")?(a.allowWhitespace(),(c=a.read())?(d.value=c.v,d):null):null):null}function qh(a,b){var c,d,e,f,g,h,i,j,k,l;if("string"==typeof a){if(d=nh.exec(a))return l=a.lastIndexOf(")"),oh.test(a)||b.error("Invalid input after method call expression '"+a.slice(l+1)+"'"),c={m:d[1]},f="["+a.slice(c.m.length+1,l)+"]",e=new ph(f),c.a=Rf(e.result[0]),c;if(-1===a.indexOf(":"))return a.trim();a=[a]}if(c={},i=[],j=[],a){for(;a.length;)if(g=a.shift(),"string"==typeof g){if(h=g.indexOf(":"),-1!==h){h&&i.push(g.substr(0,h)),g.length>h+1&&(j[0]=g.substring(h+1));break}i.push(g)}else i.push(g);j=j.concat(a)}return i.length?j.length||"string"!=typeof i?(c={n:1===i.length&&"string"==typeof i[0]?i[0]:i},1===j.length&&"string"==typeof j[0]?(k=mh("["+j[0]+"]"),c.a=k?k.value:j[0].trim()):c.d=j):c=i:c="",c}function zh(a){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,b=a.pos;if(a.inside||a.inAttribute)return null;if(!a.matchString("<"))return null;if("/"===a.nextChar())return null;if(c={},a.includeLinePositions&&(c.p=a.getLinePos(b)),a.matchString("!"))return c.t=we,a.matchPattern(/^doctype/i)||a.error("Expected DOCTYPE declaration"),c.a=a.matchPattern(/^(.+?)>/),c;if(c.t=ne,c.e=a.matchPattern(rh),!c.e)return null;for(sh.test(a.nextChar())||a.error("Illegal tag name"),f=function(b,d){var e=d.n||d;vh.test(e)&&(a.pos-=e.length,a.error("Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, detach, insert)")),c.v[b]=d},a.allowWhitespace();g=_e(a)||$g(a);)g.name?(d=wh[g.name])?c[d]=qh(g.value,a):(e=uh.exec(g.name))?(c.v||(c.v={}),h=qh(g.value,a),f(e[1],h)):a.sanitizeEventAttributes&&th.test(g.name)||(c.a||(c.a={}),c.a[g.name]=g.value||(""===g.value?"":0)):(c.m||(c.m=[]),c.m.push(g)),a.allowWhitespace();if(a.allowWhitespace(),a.matchString("/")&&(i=!0),!a.matchString(">"))return null;if(r=c.e.toLowerCase(),s=a.preserveWhitespace,!i&&!xg.test(c.e)){a.elementStack.push(r),("script"===r||"style"===r)&&(a.inside=r),j=[],k=y(null);do o=a.pos,p=a.remaining(),Ah(r,p)?(q=Wg(a))?(n=!0,t=q.e.toLowerCase(),t!==r&&(a.pos=o,~a.elementStack.indexOf(t)||(u="Unexpected closing tag",xg.test(t)&&(u+=" (<"+t+"> is a void element - it cannot contain children)"),a.error(u)))):(m=dg(a,{open:a.standardDelimiters[0],close:a.standardDelimiters[1]}))?(n=!0,a.pos=o):(m=a.read(Sh))?(k[m.n]&&(a.pos=o,a.error("Duplicate partial definition")),Ug(m.f,a.stripComments,s,!s,!s),k[m.n]=m.f,l=!0):(m=a.read(Rh))?j.push(m):n=!0:n=!0;while(!n);j.length&&(c.f=j),l&&(c.p=k),a.elementStack.pop()}return a.inside=null,a.sanitizeElements&&-1!==a.sanitizeElements.indexOf(r)?xh:c}function Ah(a,b){var c,d;return c=/^<([a-zA-Z][a-zA-Z0-9]*)/.exec(b),d=yh[a],c&&d?!~d.indexOf(c[1].toLowerCase()):!0}function Bh(a){var b,c,d,e;return c=a.remaining(),e=a.inside?"</"+a.inside:"<",a.inside&&!a.interpolate[a.inside]?b=c.indexOf(e):(d=a.tags.map(function(a){return a.open}),d=d.concat(a.tags.map(function(a){return"\\"+a.open})),a.inAttribute===!0?d.push('"',"'","=","<",">","`"):a.inAttribute?d.push(a.inAttribute):d.push(e),b=Xg(c,d)),b?(-1===b&&(b=c.length),a.pos+=b,a.inside?c.substr(0,b):Eg(c.substr(0,b))):null}function Dh(a){return a.replace(Ch,"\\$&")}function Ih(a){var g,h,b=a.pos,c=a.standardDelimiters[0],d=a.standardDelimiters[1],e=void 0,f=void 0;if(!a.matchPattern(Eh)||!a.matchString(c))return a.pos=b,null;if(g=a.matchPattern(Fh),X("Inline partial comments are deprecated.\nUse this...\n  {{#partial "+g+"}} ... {{/partial}}\n\n...instead of this:\n  <!-- {{>"+g+"}} --> ... <!-- {{/"+g+"}} -->'"),!a.matchString(d)||!a.matchPattern(Gh))return a.pos=b,null;e=[],h=new RegExp("^<!--\\s*"+Dh(c)+"\\s*\\/\\s*"+g+"\\s*"+Dh(d)+"\\s*-->");do a.matchPattern(h)?f=!0:(Hh=a.read(Rh),Hh||a.error("expected closing comment ('<!-- "+c+"/"+g+d+" -->')"),e.push(Hh));while(!f);return{t:ve,f:e,n:g}}function Kh(a){var c,d,e,f,b=a.pos,g=a.standardDelimiters;if(!a.matchString(g[0]))return null;if(!a.matchPattern(Jh))return a.pos=b,null;c=a.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/),c||a.error("expected legal partial name"),a.matchString(g[1])||a.error("Expected closing delimiter '"+g[1]+"'"),d=[];do(e=dg(a,{open:a.standardDelimiters[0],close:a.standardDelimiters[1]}))?("partial"===!e.r&&a.error("Expected "+g[0]+"/partial"+g[1]),f=!0):(e=a.read(Rh),e||a.error("Expected "+g[0]+"/partial"+g[1]),d.push(e));while(!f);return{t:ve,n:c,f:d}}function Lh(b){for(var g,h,i,j,c=[],d=y(null),e=!1,f=b.preserveWhitespace;b.pos<b.str.length;)g=b.pos,h=void 0,i=void 0,(i=b.read(Sh))?(d[i.n]&&(b.pos=g,b.error("Duplicated partial definition")),Ug(i.f,b.stripComments,f,!f,!f),d[i.n]=i.f,e=!0):(h=b.read(Rh))?c.push(h):b.error("Unexpected template content");return j={v:a,t:c},e&&(j.p=d),j
}function Qh(a,b){return new Ph(a,b||{}).result}function Vh(a){var b=y(Uh);return b.parse=function(b,c){return Wh(b,c||a)},b}function Wh(a,b){if(!Qh)throw new Error("Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser");return Qh(a,b||this.options)}function Xh(a,b){var c;if(!e){if(b&&b.noThrow)return;throw new Error("Cannot retrieve template #"+a+" as Ractive is not running in a browser.")}if(Yh(a)&&(a=a.substring(1)),!(c=document.getElementById(a))){if(b&&b.noThrow)return;throw new Error("Could not find template element with id #"+a)}if("SCRIPT"!==c.tagName.toUpperCase()){if(b&&b.noThrow)return;throw new Error("Template element with id #"+a+", must be a <script> element")}return c.textContent}function Yh(a){return a&&"#"===a.charAt(0)}function Zh(a){return!("string"==typeof a)}function $h(a){return a.defaults&&(a=a.defaults),Th.reduce(function(b,c){return b[c]=a[c],b},{})}function bi(a){var c,b=a._config.template;if(b&&b.fn)return c=ci(a,b.fn),c!==b.result?(b.result=c,c=ei(c,a)):void 0}function ci(a,b){var c=di(_h.getParseOptions(a));return b.call(a,c)}function di(a){var b=y(_h);return b.parse=function(b,c){return _h.parse(b,c||a)},b}function ei(b,c){if("string"==typeof b)"#"===b[0]&&(b=_h.fromId(b)),b=Qh(b,_h.getParseOptions(c));else{if("number"!=typeof b.v)throw new Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.");if(b.v!==a)throw new Error("Mismatched template version (expected "+a+", got "+b.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app")}return b}function fi(a,b,c){if(b)for(var d in b)(c||!a.hasOwnProperty(d))&&(a[d]=b[d])}function ki(a,b,c){if(!/_super/.test(c))return c;var d=function(){var g,a=li(d._parent,b),e="_super"in this,f=this._super;return this._super=a,g=c.apply(this,arguments),e?this._super=f:delete this._super,g};return d._parent=a,d._method=c,d}function li(a,b){var c,d;return b in a?(c=a[b],d="function"==typeof c?c:function(){return c}):d=M,d}function mi(a,b,c){return"options."+a+" has been deprecated in favour of options."+b+"."+(c?" You cannot specify both options, please use options."+b+".":"")}function ni(a,b,c){if(b in a){if(c in a)throw new Error(mi(b,c,!0));W(mi(b,c)),a[c]=a[b]}}function oi(a){ni(a,"beforeInit","onconstruct"),ni(a,"init","onrender"),ni(a,"complete","oncomplete"),ni(a,"eventDefinitions","events"),H(a.adaptors)&&ni(a,"adaptors","adapt")}function vi(a,b,c,d){var e,f;oi(d);for(e in d)ui[e]&&(f=d[e],"function"==typeof f&&(f=ji(b.prototype,e,f)),c[e]=f);ii.forEach(function(e){e[a](b,c,d)}),Pd[a](b,c,d),ai[a](b,c,d),$d[a](b,c,d),wi(b.prototype,c,d)}function wi(a,b,c){var d,e;for(d in c)!ti[d]&&c.hasOwnProperty(d)&&(e=c[d],"function"==typeof e&&(e=ji(a,d,e)),b[d]=e)}function xi(a){var b={};return a.forEach(function(a){return b[a]=!0}),b}function zi(){this.dirtyValue=this.dirtyArgs=!0,this.bound&&"function"==typeof this.owner.bubble&&this.owner.bubble()}function Bi(){var a;return 1===this.items.length?this.items[0].detach():(a=document.createDocumentFragment(),this.items.forEach(function(b){var c=b.detach();c&&a.appendChild(c)}),a)}function Di(a){var b,c,d,e;if(this.items){for(c=this.items.length,b=0;c>b;b+=1)if(d=this.items[b],d.find&&(e=d.find(a)))return e;return null}}function Fi(a,b){var c,d,e;if(this.items)for(d=this.items.length,c=0;d>c;c+=1)e=this.items[c],e.findAll&&e.findAll(a,b);return b}function Hi(a,b){var c,d,e;if(this.items)for(d=this.items.length,c=0;d>c;c+=1)e=this.items[c],e.findAllComponents&&e.findAllComponents(a,b);return b}function Ji(a){var b,c,d,e;if(this.items){for(b=this.items.length,c=0;b>c;c+=1)if(d=this.items[c],d.findComponent&&(e=d.findComponent(a)))return e;return null}}function Li(a){var c,b=a.index;return c=this.items[b+1]?this.items[b+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)}function Ni(){return this.items&&this.items[0]?this.items[0].firstNode():null}function Oi(a,b,c,d){return d=d||0,a.map(function(a){var e,f,g;return a.text?a.text:a.fragments?a.fragments.map(function(a){return Oi(a.items,b,c,d)}).join(""):(e=c+"-"+d++,g=a.keypath&&(f=a.root.viewmodel.wrapped[a.keypath.str])?f.value:a.getValue(),b[e]=g,"${"+e+"}")}).join("")}function Qi(){var a,b,c,d;return this.dirtyArgs&&(b=Oi(this.items,a={},this.root._guid),c=mh("["+b+"]",a),d=c?c.value:[this.toString()],this.argsList=d,this.dirtyArgs=!1),this.argsList}function Si(){var a=this;do if(a.pElement)return a.pElement.node;while(a=a.parent);return this.root.detached||this.root.el}function Ui(){var a,b,c,d;return this.dirtyValue&&(b=Oi(this.items,a={},this.root._guid),c=mh(b,a),d=c?c.value:this.toString(),this.value=d,this.dirtyValue=!1),this.value}function Yi(){this.registered&&this.root.viewmodel.unregister(this.keypath,this),this.resolver&&this.resolver.unbind()}function $i(){return this.value}function cj(a,b){var c,d;for(d=0;d<b.prop.length;d++)if(void 0!==(c=a[b.prop[d]]))return c}function ej(a,b){var d,e,f,g,h,c={},i=!1;for(b||(c.refs=d={});a;){if((h=a.owner)&&(e=h.indexRefs)){if(b&&(f=h.getIndexRef(b)))return c.ref={fragment:a,ref:f},c;if(!b)for(g in e)f=e[g],d[f.n]||(i=!0,d[f.n]={fragment:a,ref:f})}!a.parent&&a.owner&&a.owner.component&&a.owner.component.parentFragment&&!a.owner.component.instance.isolated?(c.componentBoundary=!0,a=a.owner.component.parentFragment):a=a.parent}return i?c:void 0}function fj(a,b,c){var d;return"@"===b.charAt(0)?new aj(a,b,c):(d=ej(a.parentFragment,b))?new dj(a,d,c):new _i(a,b,c)}function hj(a,b){var c,d;if(gj[a])return gj[a];for(d=[];b--;)d[b]="_"+b;return c=new Function(d.join(","),"return("+a+")"),gj[a]=c,c}function kj(a){return a.call()}function lj(a,b){return a.replace(/_([0-9]+)/g,function(a,c){var d,e;return+c>=b.length?"_"+c:(d=b[c],void 0===d?"undefined":d.isSpecial?(e=d.value,"number"==typeof e?e:'"'+e+'"'):d.str)})}function mj(a){return nb("${"+a.replace(/[\.\[\]]/g,"-").replace(/\*/,"#MUL#")+"}")}function nj(a){return void 0!==a&&"@"!==a[0]}function oj(a,b){var c,d,e;if(a.__ractive_nowrap)return a;if(d="__ractive_"+b._guid,c=a[d])return c;if(/this/.test(a.toString())){z(a,d,{value:jj.call(a,b),configurable:!0});for(e in a)a.hasOwnProperty(e)&&(a[d][e]=a[e]);return b._boundFunctions.push({fn:a,prop:d}),a[d]}return z(a,"__ractive_nowrap",{value:a}),a.__ractive_nowrap}function rj(a){return a.value}function sj(a){return void 0!=a}function tj(a){a.forceResolution()}function vj(a,b){function f(b){a.resolve(b)}function g(b){var c=a.keypath;b!=c&&(a.resolve(b),void 0!==c&&a.fragments&&a.fragments.forEach(function(a){a.rebind(c,b)}))}var c,d,e;d=b.parentFragment,e=b.template,a.root=d.root,a.parentFragment=d,a.pElement=d.pElement,a.template=b.template,a.index=b.index||0,a.isStatic=b.template.s,a.type=b.template.t,a.registered=!1,(c=e.r)&&(a.resolver=fj(a,c,f)),b.template.x&&(a.resolver=new ij(a,d,b.template.x,g)),b.template.rx&&(a.resolver=new qj(a,b.template.rx,g)),a.template.n!==Oe||a.hasOwnProperty("value")||a.setValue(void 0)}function xj(a){var b,c,d;return a&&a.isSpecial?(this.keypath=a,this.setValue(a.value),void 0):(this.registered&&(this.root.viewmodel.unregister(this.keypath,this),this.registered=!1,b=!0),this.keypath=a,void 0!=a&&(c=this.root.viewmodel.get(a),this.root.viewmodel.register(a,this),this.registered=!0),this.setValue(c),b&&(d=this.twowayBinding)&&d.rebound(),void 0)}function zj(a,b){this.fragments&&this.fragments.forEach(function(c){return c.rebind(a,b)}),this.resolver&&this.resolver.rebind(a,b)}function Dj(){this.parentFragment.bubble()}function Fj(){var a;return 1===this.fragments.length?this.fragments[0].detach():(a=document.createDocumentFragment(),this.fragments.forEach(function(b){a.appendChild(b.detach())}),a)}function Hj(a){var b,c,d;for(c=this.fragments.length,b=0;c>b;b+=1)if(d=this.fragments[b].find(a))return d;return null}function Jj(a,b){var c,d;for(d=this.fragments.length,c=0;d>c;c+=1)this.fragments[c].findAll(a,b)}function Lj(a,b){var c,d;for(d=this.fragments.length,c=0;d>c;c+=1)this.fragments[c].findAllComponents(a,b)}function Nj(a){var b,c,d;for(c=this.fragments.length,b=0;c>b;b+=1)if(d=this.fragments[b].findComponent(a))return d;return null}function Pj(a){return this.fragments[a.index+1]?this.fragments[a.index+1].firstNode():this.parentFragment.findNextNode(this)}function Rj(){var a,b,c;if(a=this.fragments.length)for(b=0;a>b;b+=1)if(c=this.fragments[b].firstNode())return c;return this.parentFragment.findNextNode(this)}function Tj(a){var c,d,e,f,g,h,i,b=this;if(!this.shuffling&&!this.unbound&&this.currentSubtype===Pe){if(this.shuffling=!0,cc.scheduleTask(function(){return b.shuffling=!1}),c=this.parentFragment,g=[],a.forEach(function(a,c){var e,f,h,i,j;return a===c?(g[a]=b.fragments[c],void 0):(e=b.fragments[c],void 0===d&&(d=c),-1===a?(b.fragmentsToUnrender.push(e),e.unbind(),void 0):(f=a-c,h=b.keypath.join(c),i=b.keypath.join(a),e.index=a,(j=e.registeredIndexRefs)&&j.forEach(Uj),e.rebind(h,i),g[a]=e,void 0))}),f=this.root.viewmodel.get(this.keypath).length,void 0===d){if(this.length===f)return;d=this.length}for(this.length=this.fragments.length=f,this.rendered&&cc.addView(this),h={template:this.template.f,root:this.root,owner:this},e=d;f>e;e+=1)i=g[e],i||this.fragmentsToCreate.push(e),this.fragments[e]=i}}function Uj(a){a.rebind("","")}function Xj(){var a=this;return this.docFrag=document.createDocumentFragment(),this.fragments.forEach(function(b){return a.docFrag.appendChild(b.render())}),this.renderedFragments=this.fragments.slice(),this.fragmentsToRender=[],this.rendered=!0,this.docFrag}function Zj(a){var c,d,b=this;this.updating||(this.updating=!0,this.keypath&&(c=this.root.viewmodel.wrapped[this.keypath.str])&&(a=c.get()),this.fragmentsToCreate.length?(d={template:this.template.f||[],root:this.root,pElement:this.pElement,owner:this},this.fragmentsToCreate.forEach(function(a){var c;d.context=b.keypath.join(a),d.index=a,c=new Kr(d),b.fragmentsToRender.push(b.fragments[a]=c)}),this.fragmentsToCreate.length=0):_j(this,a)&&(this.bubble(),this.rendered&&cc.addView(this)),this.value=a,this.updating=!1)}function $j(a,b,c){if(b===Pe&&a.indexRefs&&a.indexRefs[0]){var d=a.indexRefs[0];(c&&"i"===d.t||!c&&"k"===d.t)&&(c||(a.length=0,a.fragmentsToUnrender=a.fragments.slice(0),a.fragmentsToUnrender.forEach(function(a){return a.unbind()}))),d.t=c?"k":"i"}a.currentSubtype=b}function _j(a,b){var c={template:a.template.f||[],root:a.root,pElement:a.parentFragment.pElement,owner:a};if(a.hasContext=!0,a.subtype)switch(a.subtype){case Ne:return a.hasContext=!1,ek(a,b,!1,c);case Oe:return a.hasContext=!1,ek(a,b,!0,c);case Qe:return dk(a,c);case Re:return ck(a,b,c);case Pe:if(L(b))return $j(a,a.subtype,!0),bk(a,b,c)}return a.ordered=!!I(b),a.ordered?($j(a,Pe,!1),ak(a,b,c)):L(b)||"function"==typeof b?a.template.i?($j(a,Pe,!0),bk(a,b,c)):($j(a,Qe,!1),dk(a,c)):($j(a,Ne,!1),a.hasContext=!1,ek(a,b,!1,c))}function ak(a,b,c){var d,e,f;if(e=b.length,e===a.length)return!1;if(e<a.length)a.fragmentsToUnrender=a.fragments.splice(e,a.length-e),a.fragmentsToUnrender.forEach(Xb);else if(e>a.length)for(d=a.length;e>d;d+=1)c.context=a.keypath.join(d),c.index=d,f=new Kr(c),a.fragmentsToRender.push(a.fragments[d]=f);return a.length=e,!0}function bk(a,b,c){var d,e,f,g,h,i;for(f=a.hasKey||(a.hasKey={}),e=a.fragments.length;e--;)g=a.fragments[e],g.key in b||(h=!0,g.unbind(),a.fragmentsToUnrender.push(g),a.fragments.splice(e,1),f[g.key]=!1);for(e=a.fragments.length;e--;)g=a.fragments[e],g.index!==e&&(g.index=e,(i=g.registeredIndexRefs)&&i.forEach(hk));e=a.fragments.length;for(d in b)f[d]||(h=!0,c.context=a.keypath.join(d),c.key=d,c.index=e++,g=new Kr(c),a.fragmentsToRender.push(g),a.fragments.push(g),f[d]=!0);return a.length=a.fragments.length,h}function ck(a,b,c){return b?dk(a,c):fk(a)}function dk(a,b){var c;return a.length?void 0:(b.context=a.keypath,b.index=0,c=new Kr(b),a.fragmentsToRender.push(a.fragments[0]=c),a.length=1,!0)}function ek(a,b,c,d){var e,f,g,h,i;if(f=I(b)&&0===b.length,g=!1,!I(b)&&L(b)){g=!0;for(i in b){g=!1;break}}return e=c?f||g||!b:b&&!f&&!g,e?a.length?a.length>1?(a.fragmentsToUnrender=a.fragments.splice(1),a.fragmentsToUnrender.forEach(Xb),!0):void 0:(d.index=0,h=new Kr(d),a.fragmentsToRender.push(a.fragments[0]=h),a.length=1,!0):fk(a)}function fk(a){return a.length?(a.fragmentsToUnrender=a.fragments.splice(0,a.fragments.length).filter(gk),a.fragmentsToUnrender.forEach(Xb),a.length=a.fragmentsToRender.length=0,!0):void 0}function gk(a){return a.rendered}function hk(a){a.rebind("","")}function jk(a){var b,c,d;for(b="",c=0,d=this.length,c=0;d>c;c+=1)b+=this.fragments[c].toString(a);return b}function lk(){var a=this;this.fragments.forEach(Xb),this.fragmentsToRender.forEach(function(b){return Gb(a.fragments,b)}),this.fragmentsToRender=[],Xi.call(this),this.length=0,this.unbound=!0}function nk(a){this.fragments.forEach(a?ok:pk),this.renderedFragments=[],this.rendered=!1}function ok(a){a.unrender(!0)}function pk(a){a.unrender(!1)}function rk(){var a,b,c,d,e,f,g;for(c=this.renderedFragments;a=this.fragmentsToUnrender.pop();)a.unrender(!0),c.splice(c.indexOf(a),1);for(;a=this.fragmentsToRender.shift();)a.render();for(this.rendered&&(e=this.parentFragment.getNode()),g=this.fragments.length,f=0;g>f;f+=1)a=this.fragments[f],b=c.indexOf(a,f),b!==f?(this.docFrag.appendChild(a.detach()),-1!==b&&c.splice(b,1),c.splice(f,0,a)):this.docFrag.childNodes.length&&(d=a.firstNode(),e.insertBefore(this.docFrag,d));this.rendered&&this.docFrag.childNodes.length&&(d=this.parentFragment.findNextNode(this),e.insertBefore(this.docFrag,d)),this.renderedFragments=this.fragments.slice()}function uk(){var a,b;if(this.docFrag){for(a=this.nodes.length,b=0;a>b;b+=1)this.docFrag.appendChild(this.nodes[b]);return this.docFrag}}function wk(a){var b,c,d,e;for(c=this.nodes.length,b=0;c>b;b+=1)if(d=this.nodes[b],1===d.nodeType){if(n(d,a))return d;if(e=d.querySelector(a))return e}return null}function yk(a,b){var c,d,e,f,g,h;for(d=this.nodes.length,c=0;d>c;c+=1)if(e=this.nodes[c],1===e.nodeType&&(n(e,a)&&b.push(e),f=e.querySelectorAll(a)))for(g=f.length,h=0;g>h;h+=1)b.push(f[h])}function Ak(){return this.rendered&&this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)}function Fk(a){return Bk[a]||(Bk[a]=m(a))}function Gk(a){var b,c,d;a&&"select"===a.name&&a.binding&&(b=Hb(a.node.options).filter(Hk),a.getAttribute("multiple")?d=b.map(function(a){return a.value}):(c=b[0])&&(d=c.value),void 0!==d&&a.binding.setValue(d),a.bubble())}function Hk(a){return a.selected}function Jk(){if(this.rendered)throw new Error("Attempted to render an item that was already rendered");return this.docFrag=document.createDocumentFragment(),this.nodes=Ek(this.value,this.parentFragment.getNode(),this.docFrag),Gk(this.pElement),this.rendered=!0,this.docFrag}function Lk(a){var b;(b=this.root.viewmodel.wrapped[this.keypath.str])&&(a=b.get()),a!==this.value&&(this.value=a,this.parentFragment.bubble(),this.rendered&&cc.addView(this))}function Nk(){return void 0!=this.value?Eg(""+this.value):""}function Pk(a){this.rendered&&a&&(this.nodes.forEach(w),this.rendered=!1)}function Rk(){var a,b;if(this.rendered){for(;this.nodes&&this.nodes.length;)a=this.nodes.pop(),a.parentNode.removeChild(a);b=this.parentFragment.getNode(),this.nodes=Ek(this.value,b,this.docFrag),b.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),Gk(this.pElement)}}function Vk(){var b,a=this.node;return a?((b=a.parentNode)&&b.removeChild(a),a):void 0}function _k(){return null}function bl(){return this.node}function dl(a){return this.attributes&&this.attributes[a]?this.attributes[a].value:void 0}function il(){var a=this.useProperty||!this.rendered?this.fragment.getValue():this.fragment.toString();J(a,this.value)||("id"===this.name&&this.value&&delete this.root.nodes[this.value],this.value=a,"value"===this.name&&this.node&&(this.node._ractive.value=a),this.rendered&&cc.addView(this))}function pl(a){var b=a.fragment.items;if(1===b.length)return b[0].type===ie?b[0]:void 0}function rl(a){return this.type=re,this.element=a.element,this.root=a.root,ol(this,a.name),this.isBoolean=wg.test(this.name),a.value&&"string"!=typeof a.value?(this.parentFragment=this.element.parentFragment,this.fragment=new Kr({template:a.value,root:this.root,owner:this}),this.value=this.fragment.getValue(),this.interpolator=pl(this),this.isBindable=!!this.interpolator&&!this.interpolator.isStatic,this.ready=!0,void 0):(this.value=this.isBoolean?!0:a.value||"",void 0)}function tl(a,b){this.fragment&&this.fragment.rebind(a,b)}function wl(a){var b;this.node=a,a.namespaceURI&&a.namespaceURI!==i.html||(b=vl[this.name]||this.name,void 0!==a[b]&&(this.propertyName=b),(this.isBoolean||this.isTwoway)&&(this.useProperty=!0),"value"===b&&(a._ractive.value=this.value)),this.rendered=!0,this.update()}function yl(){var a=this,b=a.name,c=a.namespacePrefix,d=a.value,e=a.interpolator,f=a.fragment;if(("value"!==b||"select"!==this.element.name&&"textarea"!==this.element.name)&&("value"!==b||void 0===this.element.getAttribute("contenteditable"))){if("name"===b&&"input"===this.element.name&&e)return"name={{"+(e.keypath.str||e.ref)+"}}";if(this.isBoolean)return d?b:"";if(f){if(1===f.items.length&&null==f.items[0].value)return"";d=f.toString()}return c&&(b=c+":"+b),d?b+'="'+zl(d)+'"':b}}function zl(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function Bl(){this.fragment&&this.fragment.unbind(),"id"===this.name&&delete this.root.nodes[this.value]}function Dl(){var b,c,d,e,a=this.value;if(!this.locked)for(this.node._ractive.value=a,b=this.node.options,e=b.length;e--;)if(c=b[e],d=c._ractive?c._ractive.value:c.value,d==a){c.selected=!0;break}}function Fl(){var b,c,d,e,a=this.value;for(H(a)||(a=[a]),b=this.node.options,c=b.length;c--;)d=b[c],e=d._ractive?d._ractive.value:d.value,d.selected=Cb(a,e)}function Hl(){var a=this,b=a.node,c=a.value;b.checked=c==b._ractive.value}function Jl(){var a,c,d,e,b=this.node;if(a=b.checked,b.value=this.element.getAttribute("value"),b.checked=this.element.getAttribute("value")===this.element.getAttribute("name"),a&&!b.checked&&this.element.binding&&(d=this.element.binding.siblings,e=d.length)){for(;e--;){if(c=d[e],!c.element.node)return;if(c.element.node.checked)return cc.addRactive(c.root),c.handleChange()}this.root.viewmodel.set(c.keypath,void 0)}}function Ll(){var g,a=this,b=a.element,c=a.node,d=a.value,e=b.binding,f=b.getAttribute("value");if(H(d)){for(g=d.length;g--;)if(f==d[g])return e.isChecked=c.checked=!0,void 0;e.isChecked=c.checked=!1}else e.isChecked=c.checked=d==f}function Nl(){this.node.className=x(this.value)}function Pl(){var a=this,b=a.node,c=a.value;this.root.nodes[c]=b,b.id=c}function Rl(){var a,b;a=this.node,b=this.value,void 0===b&&(b=""),a.style.setAttribute("cssText",b)}function Tl(){var a=this.value;void 0===a&&(a=""),this.locked||(this.node.innerHTML=a)}function Vl(){var a=this,b=a.node,c=a.value;b._ractive.value=c,this.locked||(b.value=void 0==c?"":c)}function Xl(){this.locked||(this.node[this.propertyName]=this.value)}function Zl(){var a=this,b=a.node,c=a.namespace,d=a.name,e=a.value,f=a.fragment;c?b.setAttributeNS(c,d,(f||e).toString()):this.isBoolean?e?b.setAttribute(d,""):b.removeAttribute(d):null==e?b.removeAttribute(d):b.setAttribute(d,(f||e).toString())}function _l(){var e,f,a=this,b=a.name,c=a.element,d=a.node;"id"===b?f=Ol:"value"===b?"select"===c.name&&"value"===b?f=c.getAttribute("multiple")?El:Cl:"textarea"===c.name?f=Ul:null!=c.getAttribute("contenteditable")?f=Sl:"input"===c.name&&(e=c.getAttribute("type"),f="file"===e?M:"radio"===e&&c.binding&&"name"===c.binding.name?Il:Ul):this.isTwoway&&"name"===b?"radio"===d.type?f=Gl:"checkbox"===d.type&&(f=Kl):"style"===b&&d.style.setAttribute?f=Ql:"class"!==b||d.namespaceURI&&d.namespaceURI!==i.html?this.useProperty&&(f=Wl):f=Ml,f||(f=Yl),this.update=f,this.update()}function em(a,b){var c=b?"svg":"div";return cm.innerHTML="<"+c+" "+a+"></"+c+">",Hb(cm.childNodes[0].attributes)}function fm(a,b){for(var c=a.length;c--;)if(a[c].name===b.name)return!1;return!0}function jm(a){for(;a=a.parent;)if("form"===a.name)return a}function lm(){this._ractive.binding.handleChange()}function om(a,b,c){var d=a+b+c;return nm[d]||(nm[d]=[])}function sm(a){return a.isChecked}function tm(a){return a.element.getAttribute("value")}function zm(){var a;km.call(this),a=this._ractive.root.viewmodel.get(this._ractive.binding.keypath),this.value=void 0==a?"":a}function Am(){var a=this._ractive.binding,b=this;a._timeout&&clearTimeout(a._timeout),a._timeout=setTimeout(function(){a.rendered&&km.call(b),a._timeout=void 0},a.element.lazy)}function Cm(a){var c,d,e,f,g,b=a.attributes;return a.binding&&(a.binding.teardown(),a.binding=null),(a.getAttribute("contenteditable")||b.contenteditable&&Dm(b.contenteditable))&&Dm(b.value)?d=mm:"input"===a.name?(c=a.getAttribute("type"),"radio"===c||"checkbox"===c?(e=Dm(b.name),f=Dm(b.checked),e&&f&&W("A radio input can have two-way binding on its name attribute, or its checked attribute - not both",{ractive:a.root}),e?d="radio"===c?qm:rm:f&&(d="radio"===c?pm:um)):"file"===c&&Dm(b.value)?d=xm:Dm(b.value)&&(d="number"===c||"range"===c?Bm:ym)):"select"===a.name&&Dm(b.value)?d=a.getAttribute("multiple")?wm:vm:"textarea"===a.name&&Dm(b.value)&&(d=ym),d&&(g=new d(a))&&g.keypath?g:void 0}function Dm(a){return a&&a.isBindable}function Fm(){var a=this.getAction();a&&!this.hasListener?this.listen():!a&&this.hasListener&&this.unrender()}function Hm(a){Rc(this.root,this.getAction(),{event:a})}function Jm(){return this.action.toString().trim()}function Mm(a,b,c){var e,f,g,d=this;this.element=a,this.root=a.root,this.parentFragment=a.parentFragment,this.name=b,-1!==b.indexOf("*")&&(S('Only component proxy-events may contain "*" wildcards, <%s on-%s="..."/> is not valid',a.name,b),this.invalid=!0),c.m?(f=c.a.r,this.method=c.m,this.keypaths=[],this.fn=hj(c.a.s,f.length),this.parentFragment=a.parentFragment,g=this.root,this.refResolvers=[],f.forEach(function(a,b){var c=void 0;(c=Lm.exec(a))?d.keypaths[b]={eventObject:!0,refinements:c[1]?c[1].split("."):[]}:d.refResolvers.push(fj(d,a,function(a){return d.resolve(b,a)}))}),this.fire=Nm):(e=c.n||c,"string"!=typeof e&&(e=new Kr({template:e,root:this.root,owner:this})),this.action=e,c.d?(this.dynamicParams=new Kr({template:c.d,root:this.root,owner:this.element}),this.fire=Pm):c.a&&(this.params=c.a,this.fire=Om))}function Nm(a){var b,c,d;if(b=this.root,"function"!=typeof b[this.method])throw new Error('Attempted to call a non-existent method ("'+this.method+'")');c=this.keypaths.map(function(c){var d,e,f;if(void 0===c)return void 0;if(c.eventObject){if(d=a,e=c.refinements.length)for(f=0;e>f;f+=1)d=d[c.refinements[f]]}else d=b.viewmodel.get(c);return d}),Qc.enqueue(b,a),d=this.fn.apply(null,c),b[this.method].apply(b,d),Qc.dequeue(b)}function Om(a){Rc(this.root,this.getAction(),{event:a,args:this.params})}function Pm(a){var b=this.dynamicParams.getArgsList();"string"==typeof b&&(b=b.substr(1,b.length-2)),Rc(this.root,this.getAction(),{event:a,args:b})}function Qm(a){var b,c,d,e={};b=this._ractive,c=b.events[a.type],(d=ej(c.element.parentFragment))&&(e=ej.resolve(d)),c.fire({node:this,original:a,index:e,keypath:b.keypath.str,context:b.root.viewmodel.get(b.keypath)})}function Um(){var a,b=this.name;if(!this.invalid){if(a=_("events",this.root,b))this.custom=a(this.node,Vm(b));else{if(!("on"+b in this.node||window&&"on"+b in window||f))return Tm[b]||X($(b,"event"),{node:this.node}),void 0;this.node.addEventListener(b,Qm,!1)}this.hasListener=!0}}function Vm(a){return Sm[a]||(Sm[a]=function(b){var c=b.node._ractive;b.index=c.index,b.keypath=c.keypath.str,b.context=c.root.viewmodel.get(c.keypath),c.events[a].fire(b)}),Sm[a]}function Xm(a,b){function d(c){c&&c.rebind(a,b)}var c;return this.method?(c=this.element.parentFragment,this.refResolvers.forEach(d),void 0):("string"!=typeof this.action&&d(this.action),this.dynamicParams&&d(this.dynamicParams),void 0)}function Zm(){this.node=this.element.node,this.node._ractive.events[this.name]=this,(this.method||this.getAction())&&this.listen()}function _m(a,b){this.keypaths[a]=b}function bn(){return this.method?(this.refResolvers.forEach(Xb),void 0):("string"!=typeof this.action&&this.action.unbind(),this.dynamicParams&&this.dynamicParams.unbind(),void 0)}function dn(){this.custom?this.custom.teardown():this.node.removeEventListener(this.name,Qm,!1),this.hasListener=!1}function hn(){var a=this;this.dirty||(this.dirty=!0,cc.scheduleTask(function(){jn(a),a.dirty=!1})),this.parentFragment.bubble()}function jn(a){var b,c,d,e,f;b=a.node,b&&(e=Hb(b.options),c=a.getAttribute("value"),d=a.getAttribute("multiple"),void 0!==c?(e.forEach(function(a){var b,e;b=a._ractive?a._ractive.value:a.value,e=d?kn(c,b):c==b,e&&(f=!0),a.selected=e}),f||(e[0]&&(e[0].selected=!0),a.binding&&a.binding.forceUpdate())):a.binding&&a.binding.forceUpdate())}function kn(a,b){for(var c=a.length;c--;)if(a[c]==b)return!0}function ln(a,b){a.select=nn(a.parent),a.select&&(a.select.options.push(a),b.a||(b.a={}),void 0!==b.a.value||b.a.hasOwnProperty("disabled")||(b.a.value=b.f),"selected"in b.a&&void 0!==a.select.getAttribute("value")&&delete b.a.selected)}function mn(a){a.select&&Gb(a.select.options,a)}function nn(a){if(a)do if("select"===a.name)return a;while(a=a.parent)}function pn(a){var b,c,d,e,f,g,h;this.type=ne,b=this.parentFragment=a.parentFragment,c=this.template=a.template,this.parent=a.pElement||b.pElement,this.root=d=b.root,this.index=a.index,this.key=a.key,this.name=nl(c.e),"option"===this.name&&ln(this,c),"select"===this.name&&(this.options=[],this.bubble=hn),"form"===this.name&&(this.formBindings=[]),h=gl(this,c),this.attributes=bm(this,c.a),this.conditionalAttributes=gm(this,c.m),c.f&&(this.fragment=new Kr({template:c.f,root:d,owner:this,pElement:this,cssIds:null})),g=d.twoway,h.twoway===!1?g=!1:h.twoway===!0&&(g=!0),this.twoway=g,this.lazy=h.lazy,g&&(e=Cm(this,c.a))&&(this.binding=e,f=this.root._twowayBindings[e.keypath.str]||(this.root._twowayBindings[e.keypath.str]=[]),f.push(e)),c.v&&(this.eventHandlers=fn(this,c.v)),c.o&&(this.decorator=new gn(this,c.o)),this.intro=c.t0||c.t1,this.outro=c.t0||c.t2}function rn(a,b){function g(c){c.rebind(a,b)}var c,d,e,f;if(this.attributes&&this.attributes.forEach(g),this.conditionalAttributes&&this.conditionalAttributes.forEach(g),this.eventHandlers&&this.eventHandlers.forEach(g),this.decorator&&g(this.decorator),this.fragment&&g(this.fragment),e=this.liveQueries)for(f=this.root,c=e.length;c--;)e[c]._makeDirty();this.node&&(d=this.node._ractive)&&lb(d,"keypath",a,b)}function sn(a){var b;(a.attributes.width||a.attributes.height)&&a.node.addEventListener("load",b=function(){var c=a.getAttribute("width"),d=a.getAttribute("height");void 0!==c&&a.node.setAttribute("width",c),void 0!==d&&a.node.setAttribute("height",d),a.node.removeEventListener("load",b,!1)},!1)}function tn(a){a.node.addEventListener("reset",vn,!1)}function un(a){a.node.removeEventListener("reset",vn,!1)}function vn(){var a=this._ractive.proxy;cc.start(),a.formBindings.forEach(wn),cc.end()}function wn(a){a.root.viewmodel.set(a.keypath,a.resetValue)}function yn(a,b,c){var d,e,f;this.element=a,this.root=d=a.root,this.isIntro=c,e=b.n||b,("string"==typeof e||(f=new Kr({template:e,root:d,owner:a}),e=f.toString(),f.unbind(),""!==e))&&(this.name=e,b.a?this.params=b.a:b.d&&(f=new Kr({template:b.d,root:d,owner:a}),this.params=f.getArgsList(),f.unbind()),this._fn=_("transitions",d,e),this._fn||X($(e,"transition"),{ractive:this.root}))}function In(a){return a}function ao(){_n.hidden=document[Xn]}function bo(){_n.hidden=!0}function co(){_n.hidden=!1}function jo(){var d,a=this,b=this.node=this.element.node,c=b.getAttribute("style");return this.complete=function(e){d||(!e&&a.isIntro&&ko(b,c),b._ractive.transition=null,a._manager.remove(a),d=!0)},this._fn?(this._fn.apply(this.root,[this].concat(this.params)),void 0):(this.complete(),void 0)}function ko(a,b){b?a.setAttribute("style",b):(a.getAttribute("style"),a.removeAttribute("style"))}function po(){var e,a=this,b=this.root,c=qo(this),d=this.node=m(this.name,c);return this.parentFragment.cssIds&&this.node.setAttribute("data-ractive-css",this.parentFragment.cssIds.map(function(a){return"{"+a+"}"}).join(" ")),z(this.node,"_ractive",{value:{proxy:this,keypath:Qb(this.parentFragment),events:y(null),root:b}}),this.attributes.forEach(function(a){return a.render(d)}),this.conditionalAttributes.forEach(function(a){return a.render(d)}),this.fragment&&("script"===this.name?(this.bubble=oo,this.node.text=this.fragment.toString(!1),this.fragment.unrender=M):"style"===this.name?(this.bubble=no,this.bubble(),this.fragment.unrender=M):this.binding&&this.getAttribute("contenteditable")?this.fragment.unrender=M:this.node.appendChild(this.fragment.render())),this.binding&&(this.binding.render(),this.node._ractive.binding=this.binding),this.eventHandlers&&this.eventHandlers.forEach(function(a){return a.render()}),"option"===this.name&&ro(this),"img"===this.name?sn(this):"form"===this.name?tn(this):"input"===this.name||"textarea"===this.name?this.node.defaultValue=this.node.value:"option"===this.name&&(this.node.defaultSelected=this.node.selected),this.decorator&&this.decorator.fn&&cc.scheduleTask(function(){a.decorator.torndown||a.decorator.init()},!0),b.transitionsEnabled&&this.intro&&(e=new lo(this,this.intro,!0),cc.registerTransition(e),cc.scheduleTask(function(){return e.start()},!0),this.transition=e),this.node.autofocus&&cc.scheduleTask(function(){return a.node.focus()},!0),so(this),this.node}function qo(a){var b,c,d;return b=(c=a.getAttribute("xmlns"))?c:"svg"===a.name?i.svg:(d=a.parent)?"foreignObject"===d.name?i.html:d.node.namespaceURI:a.root.el.namespaceURI}function ro(a){var b,c,d;if(a.select&&(c=a.select.getAttribute("value"),void 0!==c))if(b=a.getAttribute("value"),a.select.node.multiple&&H(c)){for(d=c.length;d--;)if(b==c[d]){a.node.selected=!0;break}}else a.node.selected=b==c}function so(a){var b,c,d,e,f;b=a.root;do for(c=b._liveQueries,d=c.length;d--;)e=c[d],f=c["_"+e],f._test(a)&&(a.liveQueries||(a.liveQueries=[])).push(f);while(b=b.parent)}function uo(a){var b,c,d;if(b=a.getAttribute("value"),void 0===b||!a.select)return!1;if(c=a.select.getAttribute("value"),c==b)return!0;if(a.select.getAttribute("multiple")&&H(c))for(d=c.length;d--;)if(c[d]==b)return!0}function vo(a){var b,c,d,e;return b=a.attributes,c=b.type,d=b.value,e=b.name,c&&"radio"===c.value&&d&&e.interpolator?d.value===e.interpolator.value?!0:void 0:void 0}function wo(a){var b=a.toString();return b?" "+b:""}function yo(){this.fragment&&this.fragment.unbind(),this.binding&&this.binding.unbind(),this.eventHandlers&&this.eventHandlers.forEach(Xb),"option"===this.name&&mn(this),this.attributes.forEach(Xb),this.conditionalAttributes.forEach(Xb)}function Ao(a){var b,c,d;(d=this.transition)&&d.complete(),"option"===this.name?this.detach():a&&cc.detachWhenReady(this),this.fragment&&this.fragment.unrender(!1),(b=this.binding)&&(this.binding.unrender(),this.node._ractive.binding=null,c=this.root._twowayBindings[b.keypath.str],c.splice(c.indexOf(b),1)),this.eventHandlers&&this.eventHandlers.forEach(Yb),this.decorator&&cc.registerDecorator(this.decorator),this.root.transitionsEnabled&&this.outro&&(d=new lo(this,this.outro,!1),cc.registerTransition(d),cc.scheduleTask(function(){return d.start()})),this.liveQueries&&Bo(this),"form"===this.name&&un(this)}function Bo(a){var b,c,d;for(d=a.liveQueries.length;d--;)b=a.liveQueries[d],c=b.selector,b._remove(a.node)}function Go(a,b){var c=Eo.exec(b)[0];return null===a||c.length<a.length?c:a}function Ho(a,b,c){var d,e;return(d=Io(a,b,c||{}))?d:(d=_h.fromId(b,{noThrow:!0}),d?(d=Fo(d),e=_h.parse(d,_h.getParseOptions(a)),a.partials[b]=e.t):void 0)}function Io(a,b,c){var f,g,h,d=void 0,e=Lo(b,c.owner);return e?e:(f=ab("partials",a,b))?(e=f.partials[b],"function"==typeof e&&(d=e.bind(f),d.isOwner=f.partials.hasOwnProperty(b),e=d.call(a,_h)),e||""===e?(_h.isParsed(e)||(g=_h.parse(e,_h.getParseOptions(f)),g.p&&W("Partials ({{>%s}}) cannot contain nested inline partials",b,{ractive:a}),h=d?f:Jo(f,b),h.partials[b]=e=g.t),d&&(e._fn=d),e.v?e.t:e):(W(Z,b,"partial","partial",{ractive:a}),void 0)):void 0
}function Jo(a,b){return a.partials.hasOwnProperty(b)?a:Ko(a.constructor,b)}function Ko(a,b){return a?a.partials.hasOwnProperty(b)?a:Ko(a._Parent,b):void 0}function Lo(a,b){if(b){if(b.template&&b.template.p&&b.template.p[a])return b.template.p[a];if(b.parentFragment&&b.parentFragment.owner)return Lo(a,b.parentFragment.owner)}}function Po(a,b){var c,e,d=ab("components",a,b);if(d&&(c=d.components[b],!c._Parent)){if(e=c.bind(d),e.isOwner=d.components.hasOwnProperty(b),c=e(),!c)return W(Z,b,"component","component",{ractive:a}),void 0;"string"==typeof c&&(c=Po(a,c)),c._fn=e,d.components[b]=c}return c}function So(){var a=this.instance.fragment.detach();return Ro.fire(this.instance),a}function Uo(a){return this.instance.fragment.find(a)}function Wo(a,b){return this.instance.fragment.findAll(a,b)}function Yo(a,b){b._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(a,b)}function $o(a){return a&&a!==this.name?this.instance.fragment?this.instance.fragment.findComponent(a):null:this.instance}function ap(){return this.parentFragment.findNextNode(this)}function cp(){return this.rendered?this.instance.fragment.firstNode():null}function rp(a,b,c){function j(a){var c,d;a.value=b,a.updating||(d=a.ractive,c=a.keypath,a.updating=!0,cc.start(d),d.viewmodel.mark(c),cc.end(),a.updating=!1)}var d,e,f,g,h,i;if(d=a.obj,e=a.prop,c&&!c.configurable){if("length"===e)return;throw new Error('Cannot use magic mode with property "'+e+'" - object is not configurable')}c&&(f=c.get,g=c.set),h=f||function(){return b},i=function(a){g&&g(a),b=f?f():a,i._ractiveWrappers.forEach(j)},i._ractiveWrappers=[a],Object.defineProperty(d,e,{get:h,set:i,enumerable:!0,configurable:!0})}function wp(a,b){var c,d,e,f;if(this.adaptors)for(c=this.adaptors.length,d=0;c>d;d+=1)if(e=this.adaptors[d],e.filter(b,a,this.ractive))return f=this.wrapped[a]=e.wrap(this.ractive,b,a,yp(a)),f.value=b,void 0}function xp(a,b){var d,c={};if(!b)return a;b+=".";for(d in a)a.hasOwnProperty(d)&&(c[b+d]=a[d]);return c}function yp(a){var b;return vp[a]||(b=a?a+".":"",vp[a]=function(c,d){var e;return"string"==typeof c?(e={},e[b+c]=d,e):"object"==typeof c?b?xp(c,a):c:void 0}),vp[a]}function zp(a){var c,d,b=[rb];for(c=a.length;c--;)for(d=a[c].parent;d&&!d.isRoot;)-1===a.indexOf(d)&&Bb(b,d),d=d.parent;return b}function Ap(a,b,c){var d;Cp(a,b),c||(d=b.wildcardMatches(),d.forEach(function(c){Bp(a,c,b)}))}function Bp(a,b,c){var d,e,f;b=b.str||b,d=a.depsMap.patternObservers,e=d&&d[b],e&&e.forEach(function(b){f=c.join(b.lastKey),Cp(a,f),Bp(a,b,f)})}function Cp(a,b){a.patternObservers.forEach(function(a){a.regex.test(b.str)&&a.update(b)})}function Ep(){function g(a){var d=a.key;a.viewmodel===b?(b.clearCache(d.str),a.invalidate(),c.push(d),h(d)):a.viewmodel.mark(d)}function h(a){var c,d;b.noCascade.hasOwnProperty(a.str)||((d=b.deps.computed[a.str])&&d.forEach(g),(c=b.depsMap.computed[a.str])&&c.forEach(h))}var d,f,a=this,b=this,e={},c=this.changes;if(c.length)return c.slice().forEach(h),d=zp(c),d.forEach(function(a){var d;-1===c.indexOf(a)&&(d=b.deps.computed[a.str])&&d.forEach(g)}),this.changes=[],this.patternObservers.length&&(d.forEach(function(b){return Ap(a,b,!0)}),c.forEach(function(b){return Ap(a,b)})),this.deps.observers&&(d.forEach(function(b){return Fp(a,null,b,"observers")}),Hp(this,c,"observers")),this.deps["default"]&&(f=[],d.forEach(function(b){return Fp(a,f,b,"default")}),f.length&&Gp(this,f,c),Hp(this,c,"default")),c.forEach(function(b){e[b.str]=a.get(b)}),this.implicitChanges={},this.noCascade={},e}function Fp(a,b,c,d){var e,f;(e=Ip(a,c,d))&&(f=a.get(c),e.forEach(function(a){b&&a.refineValue?b.push(a):a.setValue(f)}))}function Gp(a,b,c){b.forEach(function(b){for(var h,d=!1,e=0,f=c.length,g=[];f>e;){if(h=c[e],h===b.keypath){d=!0;break}h.slice(0,b.keypath.length)===b.keypath&&g.push(h),e++}d&&b.setValue(a.get(b.keypath)),g.length&&b.refineValue(g)})}function Hp(a,b,c){function e(a){a.forEach(f),a.forEach(g)}function f(b){var e=Ip(a,b,c);e&&d.push({keypath:b,deps:e})}function g(b){var d;(d=a.depsMap[c][b.str])&&e(d)}function h(b){var c=a.get(b.keypath);b.deps.forEach(function(a){return a.setValue(c)})}var d=[];e(b),d.forEach(h)}function Ip(a,b,c){var d=a.deps[c];return d?d[b.str]:null}function Kp(){this.captureGroups.push([])}function Mp(a,b){var c,d;if(b||(d=this.wrapped[a])&&d.teardown()!==!1&&(this.wrapped[a]=null),this.cache[a]=void 0,c=this.cacheMap[a])for(;c.length;)this.clearCache(c.pop())}function Pp(a,b){var c=b.firstKey;return!(c in a.data||c in a.computations||c in a.mappings)}function Rp(a,b){var c=new Op(a,b);return this.ready&&c.init(this),this.computations[a.str]=c}function Vp(a,b){var d,e,f,g,i,c=this.cache,h=a.str;if(b=b||Up,b.capture&&(g=Fb(this.captureGroups))&&(~g.indexOf(a)||g.push(a)),E.call(this.mappings,a.firstKey))return this.mappings[a.firstKey].get(a,b);if(a.isSpecial)return a.value;if(void 0===c[h]?((e=this.computations[h])&&!e.bypass?(d=e.get(),this.adapt(h,d)):(f=this.wrapped[h])?d=f.value:a.isRoot?(this.adapt("",this.data),d=this.data):d=Wp(this,a),c[h]=d):d=c[h],!b.noUnwrap&&(f=this.wrapped[h])&&(d=f.get()),a.isRoot&&b.fullRootGet)for(i in this.mappings)d[i]=this.mappings[i].getValue();return d===Sp?void 0:d}function Wp(a,b){var c,d,e,f;return c=a.get(b.parent),(f=a.wrapped[b.parent.str])&&(c=f.get()),null!==c&&void 0!==c?((d=a.cacheMap[b.parent.str])?-1===d.indexOf(b.str)&&d.push(b.str):a.cacheMap[b.parent.str]=[b.str],"object"!=typeof c||b.lastKey in c?(e=c[b.lastKey],a.adapt(b.str,e,!1),a.cache[b.str]=e,e):a.cache[b.str]=Sp):void 0}function Yp(){var a;for(a in this.computations)this.computations[a].init(this)}function $p(a,b){var c=this.mappings[a.str]=new _p(a,b);return c.initViewmodel(this),c}function bq(a,b){var c,e,d=a.str;b&&(b.implicit&&(this.implicitChanges[d]=!0),b.noCascade&&(this.noCascade[d]=!0)),(c=this.computations[d])&&c.invalidate(),-1===this.changes.indexOf(a)&&this.changes.push(a),e=b?b.keepExistingWrapper:!1,this.clearCache(d,e),this.ready&&this.onchange()}function fq(a,b,c,d){var e,f,g,h;if(this.mark(a),d&&d.compare){g=hq(d.compare);try{e=b.map(g),f=c.map(g)}catch(i){W('merge(): "%s" comparison failed. Falling back to identity checking',a),e=b,f=c}}else e=b,f=c;h=cq(e,f),this.smartUpdate(a,c,h,b.length!==c.length)}function gq(a){return JSON.stringify(a)}function hq(a){if(a===!0)return gq;if("string"==typeof a)return eq[a]||(eq[a]=function(b){return b[a]}),eq[a];if("function"==typeof a)return a;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}function jq(a,b){var d,e,f,c=void 0===arguments[2]?"default":arguments[2];b.isStatic||((d=this.mappings[a.firstKey])?d.register(a,b,c):(e=this.deps[c]||(this.deps[c]={}),f=e[a.str]||(e[a.str]=[]),f.push(b),a.isRoot||kq(this,a,c)))}function kq(a,b,c){for(var d,e,f;!b.isRoot;)d=a.depsMap[c]||(a.depsMap[c]={}),e=d[b.parent.str]||(d[b.parent.str]=[]),f=b.str,void 0===e["_"+f]&&(e["_"+f]=0,e.push(b)),e["_"+f]+=1,b=b.parent}function mq(){return this.captureGroups.pop()}function oq(a){this.data=a,this.clearCache("")}function qq(a,b){var d,e,f,g,c=void 0===arguments[2]?{}:arguments[2];if(!c.noMapping&&(d=this.mappings[a.firstKey]))return d.set(a,b);if(e=this.computations[a.str]){if(e.setting)return;e.set(b),b=e.get()}J(this.cache[a.str],b)||(f=this.wrapped[a.str],f&&f.reset&&(g=f.reset(b)!==!1,g&&(b=f.get())),e||g||rq(this,a,b),c.silent?this.clearCache(a.str):this.mark(a))}function rq(a,b,c){var d,e,f,g;f=function(){d.set?d.set(b.lastKey,c):(e=d.get(),g())},g=function(){e||(e=op(b.lastKey),a.set(b.parent,e,{silent:!0})),e[b.lastKey]=c},d=a.wrapped[b.parent.str],d?f():(e=a.get(b.parent),(d=a.wrapped[b.parent.str])?f():g())}function vq(a,b,c){var e,g,d=this,f=c.length;if(c.forEach(function(b,c){-1===b&&d.mark(a.join(c),uq)}),this.set(a,b,{silent:!0}),(e=this.deps["default"][a.str])&&e.filter(wq).forEach(function(a){return a.shuffle(c,b)}),f!==b.length){for(this.mark(a.join("length"),tq),g=c.touchedFrom;g<b.length;g+=1)this.mark(a.join(g));for(g=b.length;f>g;g+=1)this.mark(a.join(g),uq)}}function wq(a){return"function"==typeof a.shuffle}function yq(){var b,a=this;for(Object.keys(this.cache).forEach(function(b){return a.clearCache(b)});b=this.unresolvedImplicitDependencies.pop();)b.teardown()}function Aq(a,b){var d,e,f,c=void 0===arguments[2]?"default":arguments[2];if(!b.isStatic){if(d=this.mappings[a.firstKey])return d.unregister(a,b,c);if(e=this.deps[c][a.str],f=e.indexOf(b),-1===f)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");e.splice(f,1),a.isRoot||Bq(this,a,c)}}function Bq(a,b,c){for(var d,e;!b.isRoot;)d=a.depsMap[c],e=d[b.parent.str],e["_"+b.str]-=1,e["_"+b.str]||(Gb(e,b),e["_"+b.str]=void 0),b=b.parent}function Dq(a){this.hook=new Ab(a),this.inProcess={},this.queue={}}function Eq(a,b){return a[b._guid]||(a[b._guid]=[])}function Fq(a,b){var c=Eq(a.queue,b);for(a.hook.fire(b);c.length;)Fq(a,c.shift());delete a.queue[b._guid]}function Hq(a,b){var d,c={};for(d in b)c[d]=Iq(a,d,b[d]);return c}function Iq(a,b,c){var d,e;return"function"==typeof c&&(d=Kq(c,a)),"string"==typeof c&&(d=Jq(a,c)),"object"==typeof c&&("string"==typeof c.get?d=Jq(a,c.get):"function"==typeof c.get?d=Kq(c.get,a):S("`%s` computation must have a `get()` method",b),"function"==typeof c.set&&(e=Kq(c.set,a))),{getter:d,setter:e}}function Jq(a,b){var c,d,e;return c="return ("+b.replace(Gq,function(a,b){return d=!0,'__ractive.get("'+b+'")'})+");",d&&(c="var __ractive = this; "+c),e=new Function(c),d?e.bind(a):e}function Kq(a,b){return/this/.test(a.toString())?a.bind(b):a}function Rq(a){var d,e,f,g,b=void 0===arguments[1]?{}:arguments[1],c=void 0===arguments[2]?{}:arguments[2];Ds.DEBUG&&Q(),Uq(a,c),z(a,"data",{get:Vq}),Lq.fire(a,b),Pq.forEach(function(c){a[c]=C(y(a.constructor[c]||null),b[c])}),e=new Cq({adapt:Sq(a,a.adapt,b),data:ae.init(a.constructor,a,b),computed:Hq(a,C(y(a.constructor.prototype.computed),b.computed)),mappings:c.mappings,ractive:a,onchange:function(){return cc.addRactive(a)}}),a.viewmodel=e,e.init(),pi.init(a.constructor,a,b),Mq.fire(a),Nq.begin(a),a.template&&(f=void 0,(c.cssIds||a.cssId)&&(f=c.cssIds?c.cssIds.slice():[],a.cssId&&f.push(a.cssId)),a.fragment=new Kr({template:a.template,root:a,owner:a,cssIds:f})),Nq.end(a),(d=v(a.el))&&(g=a.render(d,a.append),Ds.DEBUG_PROMISES&&g["catch"](function(b){throw X("Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;"),W("An error happened during rendering",{ractive:a}),b.stack&&T(b.stack),b}))}function Sq(a,b,c){function g(b){return"string"==typeof b&&(b=_("adaptors",a,b),b||S($(b,"adaptor"))),b}var d,e,f;if(b=b.map(g),d=Eb(c.adapt).map(g),d=Tq(b,d),e="magic"in c?c.magic:a.magic,f="modifyArrays"in c?c.modifyArrays:a.modifyArrays,e){if(!h)throw new Error("Getters and setters (magic mode) are not supported in this browser");f&&d.push(sp),d.push(pp)}return f&&d.push(kp),d}function Tq(a,b){for(var c=a.slice(),d=b.length;d--;)~c.indexOf(b[d])||c.push(b[d]);return c}function Uq(a,b){a._guid="r-"+Oq++,a._subs=y(null),a._config={},a._twowayBindings=y(null),a._animations=[],a.nodes={},a._liveQueries=[],a._liveComponentQueries=[],a._boundFunctions=[],b.component?(a.parent=b.parent,a.container=b.container||null,a.root=a.parent.root,a.component=b.component,b.component.instance=a,a._inlinePartials=b.inlinePartials):(a.root=a,a.parent=a.container=null)}function Vq(){throw new Error("Using `ractive.data` is no longer supported - you must use the `ractive.get()` API instead")}function Wq(a,b,c){this.parentFragment=a.parentFragment,this.callback=c,this.fragment=new Kr({template:b,root:a.root,owner:this}),this.update()}function Yq(a,b,c){var d;return b.r?d=fj(a,b.r,c):b.x?d=new ij(a,a.parentFragment,b.x,c):b.rx&&(d=new qj(a,b.rx,c)),d}function Zq(a){return 1===a.length&&a[0].t===ie}function $q(a,b){var c;for(c in b)b.hasOwnProperty(c)&&_q(a.instance,a.root,c,b[c])}function _q(a,b,c,d){"string"!=typeof d&&S("Components currently only support simple events - you cannot include arguments. Sorry!"),a.on(c,function(){var a,c;return arguments.length&&arguments[0]&&arguments[0].node&&(a=Array.prototype.shift.call(arguments)),c=Array.prototype.slice.call(arguments),Rc(b,d,{event:a,args:c}),!1})}function cr(a,b){var c,d;if(!b)throw new Error('Component "'+this.name+'" not found');c=this.parentFragment=a.parentFragment,d=c.root,this.root=d,this.type=te,this.name=a.template.e,this.index=a.index,this.indexRefBindings={},this.yielders={},this.resolvers=[],Xq(this,b,a.template.a,a.template.f,a.template.p),$q(this,a.template.v),(a.template.t1||a.template.t2||a.template.o)&&W('The "intro", "outro" and "decorator" directives have no effect on components',{ractive:this.instance}),ar(this)}function er(a,b){function e(c){c.rebind(a,b)}var c,d;this.resolvers.forEach(e);for(d in this.yielders)this.yielders[d][0]&&e(this.yielders[d][0]);(c=this.root._liveComponentQueries["_"+this.name])&&c._makeDirty()}function gr(){var a=this.instance;return a.render(this.parentFragment.getNode()),this.rendered=!0,a.fragment.detach()}function ir(){return this.instance.fragment.toString()}function lr(){var a=this.instance;this.resolvers.forEach(Xb),mr(this),a.fragment.unbind(),a.viewmodel.teardown(),a.fragment.rendered&&a.el.__ractive_instances__&&Gb(a.el.__ractive_instances__,a),kr.fire(a)}function mr(a){var b,c;b=a.root;do(c=b._liveComponentQueries["_"+a.name])&&c._remove(a);while(b=b.parent)}function or(a){this.shouldDestroy=a,this.instance.unrender()}function vr(a){var b=this;this.owner=a.owner,this.parent=this.owner.parentFragment,this.root=a.root,this.pElement=a.pElement,this.context=a.context,this.index=a.index,this.key=a.key,this.registeredIndexRefs=[],this.cssIds="cssIds"in a?a.cssIds:this.parent?this.parent.cssIds:null,this.items=a.template.map(function(c,d){return wr({parentFragment:b,pElement:a.pElement,template:c,index:d})}),this.value=this.argsList=null,this.dirtyArgs=this.dirtyValue=!0,this.bound=!0}function wr(a){if("string"==typeof a.template)return new Wi(a);switch(a.template.t){case ue:return new sr(a);case ie:return new Bj(a);case ke:return new sk(a);case je:return new Sk(a);case ne:var b=void 0;return(b=Po(a.parentFragment.root,a.template.e))?new qr(a,b):new Co(a);case oe:return new Oo(a);case pe:return new rr(a);case we:return new tr(a);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")}}function yr(a,b){(!this.owner||this.owner.hasContext)&&lb(this,"context",a,b),this.items.forEach(function(c){c.rebind&&c.rebind(a,b)})}function Ar(){var a;return 1===this.items.length?a=this.items[0].render():(a=document.createDocumentFragment(),this.items.forEach(function(b){a.appendChild(b.render())})),this.rendered=!0,a}function Cr(a){return this.items?this.items.map(a?Er:Dr).join(""):""}function Dr(a){return a.toString()}function Er(a){return a.toString(!0)}function Gr(){this.bound&&(this.items.forEach(Hr),this.bound=!1)}function Hr(a){a.unbind&&a.unbind()}function Jr(a){if(!this.rendered)throw new Error("Attempted to unrender a fragment that was not rendered");this.items.forEach(function(b){return b.unrender(a)}),this.rendered=!1}function Or(a){var b,c,d,e,f,g;if(a=a||{},"object"!=typeof a)throw new Error("The reset method takes either no arguments, or an object containing new data");for((c=this.viewmodel.wrapped[""])&&c.reset?c.reset(a)===!1&&this.viewmodel.reset(a):this.viewmodel.reset(a),d=pi.reset(this),e=d.length;e--;)if(Mr.indexOf(d[e])>-1){f=!0;break}return f?(g=void 0,this.viewmodel.mark(rb),(g=this.component)&&(g.shouldDestroy=!0),this.unrender(),g&&(g.shouldDestroy=!1),this.fragment.template!==this.template&&(this.fragment.unbind(),this.fragment=new Kr({template:this.template,root:this,owner:this})),b=this.render(this.el,this.anchor)):(b=cc.start(this,!0),this.viewmodel.mark(rb),cc.end()),Nr.fire(this,a),b}function Rr(a){var b,c;ai.init(null,this,{template:a}),b=this.transitionsEnabled,this.transitionsEnabled=!1,(c=this.component)&&(c.shouldDestroy=!0),this.unrender(),c&&(c.shouldDestroy=!1),this.fragment.unbind(),this.fragment=new Kr({template:this.template,root:this,owner:this}),this.render(this.el,this.anchor),this.transitionsEnabled=b}function Ur(a,b){var c,d;if(d=cc.start(this,!0),L(a)){c=a;for(a in c)c.hasOwnProperty(a)&&(b=c[a],Vr(this,a,b))}else Vr(this,a,b);return cc.end(),d}function Vr(a,b,c){b=nb(qb(b)),b.isPattern?ob(a,b).forEach(function(b){a.viewmodel.set(b,c)}):a.viewmodel.set(b,c)}function $r(a,b){return tb(this,a,void 0===b?-1:-b)}function bs(){var a;return this.fragment.unbind(),this.viewmodel.teardown(),this.fragment.rendered&&this.el.__ractive_instances__&&Gb(this.el.__ractive_instances__,this),this.shouldDestroy=!0,a=this.fragment.rendered?this.unrender():Mb.resolve(),as.fire(this),this._boundFunctions.forEach(cs),a}function cs(a){delete a.fn[a.prop]}function es(a){var c,b=this;if("string"!=typeof a)throw new TypeError(Y);return c=void 0,/\*/.test(a)?(c={},ob(this,nb(qb(a))).forEach(function(a){c[a.str]=!b.viewmodel.get(a)}),this.set(c)):this.set(a,!this.get(a))}function gs(){return this.fragment.toString(!0)}function js(){var a,b;if(!this.fragment.rendered)return W("ractive.unrender() was called on a Ractive instance that was not rendered"),Mb.resolve();for(a=cc.start(this,!0),b=!this.component||this.component.shouldDestroy||this.shouldDestroy;this._animations[0];)this._animations[0].stop();return this.fragment.unrender(b),Gb(this.el.__ractive_instances__,this),is.fire(this),cc.end(),a}function ns(a){var b;return a=nb(a)||rb,b=cc.start(this,!0),this.viewmodel.mark(a),cc.end(),ms.fire(this,a),b}function ps(a,b){var c,d,e;if("string"!=typeof a||b){e=[];for(d in this._twowayBindings)(!a||nb(d).equalsOrStartsWith(a))&&e.push.apply(e,this._twowayBindings[d])}else e=this._twowayBindings[a];return c=qs(this,e),this.set(c)}function qs(a,b){var c={},d=[];return b.forEach(function(a){var b,e;if(!a.radioName||a.element.node.checked){if(a.checkboxName)return d[a.keypath.str]||a.changed()||(d.push(a.keypath),d[a.keypath.str]=a),void 0;b=a.attribute.value,e=a.getValue(),Db(b,e)||J(b,e)||(c[a.keypath.str]=e)}}),d.length&&d.forEach(function(a){var b,e,f;b=d[a.str],e=b.attribute.value,f=b.getValue(),Db(e,f)||(c[a.str]=f)}),c}function ts(a,b){return"function"==typeof b&&/_super/.test(a)}function vs(a){for(var b={};a;)ws(a,b),ys(a,b),a=a._Parent!==Ds?a._Parent:!1;return b}function ws(a,b){ii.forEach(function(c){xs(c.useDefaults?a.prototype:a,b,c.name)})}function xs(a,b,c){var d,e=Object.keys(a[c]);e.length&&((d=b[c])||(d=b[c]={}),e.filter(function(a){return!(a in d)}).forEach(function(b){return d[b]=a[c][b]}))}function ys(a,b){Object.keys(a.prototype).forEach(function(c){var d,e,f;"computed"!==c&&(d=a.prototype[c],c in b?"function"==typeof b[c]&&"function"==typeof d&&b[c]._method&&(e=void 0,f=d._method,f&&(d=d._method),e=ss(b[c]._method,d),f&&(e._method=e),b[c]=e):b[c]=d._method?d._method:d)})}function As(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];return b.length?b.reduce(Bs,this):Bs(this)}function Bs(a){var c,d,b=void 0===arguments[1]?{}:arguments[1];return b.prototype instanceof Ds&&(b=us(b)),c=function(a){return this instanceof c?(Qq(this,a),void 0):new c(a)},d=y(a.prototype),d.constructor=c,A(c,{defaults:{value:d},extend:{value:As,writable:!0,configurable:!0},_Parent:{value:a}}),pi.extend(a,d,b),ae.extend(a,d,b),b.computed&&(d.computed=C(y(a.prototype.computed),b.computed)),c.prototype=d,c}var h,i,j,k,m,n,o,p,q,r,s,t,u,y,z,A,E,F,G,M,O,P,Q,N,Y,Z,$,bb,db,eb,hb,ib,jb,kb,rb,sb,ub,wb,xb,yb,zb,Ib,Jb,Kb,Lb,Mb,Qb,Zb,bc,cc,dc,ec,ic,jc,kc,lc,mc,nc,qc,rc,tc,vc,xc,yc,Bc,Cc,Dc,Ec,Gc,Ic,Kc,Mc,Oc,Qc,Uc,Wc,Xc,Zc,$c,bd,dd,fd,gd,hd,jd,ld,nd,od,pd,rd,td,xd,yd,zd,Ad,Bd,Cd,Dd,Ed,Fd,Gd,Hd,Id,Jd,Kd,Ld,Md,Pd,Rd,Sd,Td,Ud,Vd,Zd,$d,ae,ee,fe,ge,he,ie,je,ke,le,me,ne,oe,pe,qe,re,se,te,ue,ve,we,xe,ye,ze,Ae,Be,Ce,De,Ee,Fe,Ge,He,Ie,Je,Ke,Le,Me,Ne,Oe,Pe,Qe,Re,Se,Te,Ue,Ve,Xe,Ye,$e,bf,cf,df,ef,hf,jf,kf,lf,mf,nf,of,pf,qf,sf,vf,xf,Af,Bf,zf,Cf,Df,Gf,If,Jf,Kf,Lf,Mf,Nf,Of,Tf,Zf,bg,eg,fg,hg,ig,kg,lg,mg,ng,tg,ug,wg,xg,yg,zg,Ag,Bg,Cg,Dg,Hg,Ig,Jg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Vg,Xg,Yg,Zg,eh,fh,gh,hh,ih,jh,kh,mh,ph,nh,oh,yh,rh,sh,th,uh,vh,wh,xh,Ch,Hh,Eh,Fh,Gh,Jh,Mh,Nh,Oh,Ph,Rh,Sh,Th,Uh,_h,ai,gi,hi,ii,ji,pi,qi,ri,si,ti,ui,yi,Ai,Ci,Ei,Gi,Ii,Ki,Mi,Pi,Ri,Ti,Vi,Wi,Xi,Zi,_i,aj,bj,dj,gj,ij,jj,pj,qj,uj,wj,yj,Aj,Bj,Cj,Ej,Gj,Ij,Kj,Mj,Oj,Qj,Sj,Vj,Wj,Yj,ik,kk,mk,qk,sk,tk,vk,xk,zk,Ck,Dk,Bk,Ek,Ik,Kk,Mk,Ok,Qk,Sk,Tk,Uk,Wk,Xk,Yk,Zk,$k,al,cl,el,fl,gl,hl,jl,kl,ll,ml,nl,ol,ql,sl,ul,vl,xl,Al,Cl,El,Gl,Il,Kl,Ml,Ol,Ql,Sl,Ul,Wl,Yl,$l,am,bm,cm,dm,gm,hm,im,km,mm,nm,pm,qm,rm,um,vm,wm,xm,ym,Bm,Em,Gm,Im,Km,Lm,Rm,Sm,Tm,Wm,Ym,$m,an,cn,en,fn,gn,on,qn,xn,zn,An,Bn,Cn,Dn,En,Fn,Gn,Hn,Jn,Kn,Ln,Mn,Nn,On,Pn,Qn,Rn,Sn,Tn,Un,Vn,Wn,Xn,Yn,Zn,$n,_n,eo,fo,go,ho,io,lo,mo,no,oo,to,xo,zo,Co,Do,Eo,Fo,Mo,No,Oo,Qo,Ro,To,Vo,Xo,Zo,_o,bp,dp,gp,hp,ip,ep,fp,jp,kp,lp,mp,np,op,pp,qp,sp,tp,up,vp,Dp,Jp,Lp,Np,Op,Qp,Sp,Tp,Up,Xp,Zp,_p,aq,cq,dq,eq,iq,lq,nq,pq,sq,tq,uq,xq,zq,Cq,Gq,Lq,Mq,Nq,Oq,Pq,Qq,Xq,ar,br,dr,fr,hr,jr,kr,nr,pr,qr,rr,sr,tr,ur,xr,zr,Br,Fr,Ir,Kr,Lr,Mr,Nr,Pr,Qr,Sr,Tr,Wr,Xr,Yr,Zr,_r,as,ds,fs,hs,is,ks,ls,ms,os,rs,ss,us,zs,Cs,Ds,Es,Fs,a=3,b={el:void 0,append:!1,template:{v:a,t:[]},preserveWhitespace:!1,sanitize:!1,stripComments:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],interpolate:!1,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,css:null,noCssTransform:!1},c=b,d={linear:function(a){return a},easeIn:function(a){return Math.pow(a,3)},easeOut:function(a){return Math.pow(a-1,3)+1},easeInOut:function(a){return(a/=.5)<1?.5*Math.pow(a,3):.5*(Math.pow(a-2,3)+2)}},e="object"==typeof document,f="undefined"!=typeof navigator&&/jsDom/.test(navigator.appName),g="undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply;try{Object.defineProperty({},"test",{value:0}),h=!0}catch(l){h=!1}if(i={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},j="undefined"==typeof document?!1:document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),k=["o","ms","moz","webkit"],m=j?function(a,b){return b&&b!==i.html?document.createElementNS(b,a):document.createElement(a)}:function(a,b){if(b&&b!==i.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(a)},e){for(o=m("div"),p=["matches","matchesSelector"],u=function(a){return function(b,c){return b[a](c)}},s=p.length;s--&&!n;)if(q=p[s],o[q])n=u(q);else for(t=k.length;t--;)if(r=k[s]+q.substr(0,1).toUpperCase()+q.substring(1),o[r]){n=u(r);break}n||(n=function(a,b){var c,d,e;for(d=a.parentNode,d||(o.innerHTML="",d=o,a=a.cloneNode(),o.appendChild(a)),c=d.querySelectorAll(b),e=c.length;e--;)if(c[e]===a)return!0;return!1})}else n=null;try{Object.defineProperty({},"test",{value:0}),e&&Object.defineProperty(document.createElement("div"),"test",{value:0}),z=Object.defineProperty}catch(B){z=function(a,b,c){a[b]=c.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(B){throw B}e&&Object.defineProperties(m("div"),{test:{value:0}}),A=Object.defineProperties}catch(B){A=function(a,b){var c;for(c in b)b.hasOwnProperty(c)&&z(a,c,b[c])}}try{Object.create(null),y=Object.create}catch(B){y=function(){var a=function(){};return function(b,c){var d;return null===b?{}:(a.prototype=b,d=new a,c&&Object.defineProperties(d,c),d)}}()}E=Object.prototype.hasOwnProperty,F=Object.prototype.toString,G=/^\[object (?:Array|FileList)\]$/,M=function(){},N={},g?function(){var a=["%cRactive.js %c0.7.1 %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"],b="You're running Ractive <@version@> in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://docs.ractivejs.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n";Q=function(){var c=!!console.groupCollapsed;console[c?"groupCollapsed":"log"].apply(console,a),console.log(b),c&&console.groupEnd(a),Q=M},P=function(a,b){var c,d,e,f;Q(),"object"==typeof b[b.length-1]&&(c=b.pop(),d=c.ractive,d&&(e=void 0,d.component&&(e=d.component.name)&&(a="<"+e+"> "+a),f=void 0,(f=c.node||d.fragment&&d.fragment.rendered&&d.find("*"))&&b.push(f))),console.warn.apply(console,["%cRactive.js: %c"+a,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(b))},O=function(){console.log.apply(console,arguments)}}():P=O=Q=M,Y="Bad arguments",Z='A function was specified for "%s" %s, but no %s was returned',$=function(a,b){return'Missing "'+a+'" '+b+" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#"+b+"s"},bb=function(a,b,c,d){if(a===b)return cb(b);if(d){var e=_("interpolators",c,d);if(e)return e(a,b)||cb(b);S($(d,"interpolator"))}return db.number(a,b)||db.array(a,b)||db.object(a,b)||cb(b)},db={number:function(a,b){var c;return K(a)&&K(b)?(a=+a,b=+b,c=b-a,c?function(b){return a+b*c}:function(){return a}):null},array:function(a,b){var c,d,e,f;if(!H(a)||!H(b))return null;for(c=[],d=[],f=e=Math.min(a.length,b.length);f--;)d[f]=bb(a[f],b[f]);for(f=e;f<a.length;f+=1)c[f]=a[f];for(f=e;f<b.length;f+=1)c[f]=b[f];return function(a){for(var b=e;b--;)c[b]=d[b](a);return c}},object:function(a,b){var c,d,e,f,g;if(!L(a)||!L(b))return null;c=[],f={},e={};for(g in a)E.call(a,g)&&(E.call(b,g)?(c.push(g),e[g]=bb(a[g],b[g])):f[g]=a[g]);for(g in b)E.call(b,g)&&!E.call(a,g)&&(f[g]=b[g]);return d=c.length,function(a){for(var g,b=d;b--;)g=c[b],f[g]=e[g](a);return f}}},eb={},hb=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,ib=/\*/,jb={},kb=function(a){var b=a.split(".");this.str=a,"@"===a[0]&&(this.isSpecial=!0,this.value=mb(a)),this.firstKey=b[0],this.lastKey=b.pop(),this.isPattern=ib.test(a),this.parent=""===a?null:nb(b.join(".")),this.isRoot=!a},kb.prototype={equalsOrStartsWith:function(a){return a===this||this.startsWith(a)},join:function(a){return nb(this.isRoot?String(a):this.str+"."+a)},replace:function(a,b){return this===a?b:this.startsWith(a)?null===b?b:nb(this.str.replace(a.str+".",b.str+".")):void 0},startsWith:function(a){return a?a&&this.str.substr(0,a.str.length+1)===a.str+".":!1},toString:function(){throw new Error("Bad coercion")},valueOf:function(){throw new Error("Bad coercion")},wildcardMatches:function(){return this._wildcardMatches||(this._wildcardMatches=fb(this.str))}},rb=nb(""),sb="Cannot add to a non-numeric value",ub=vb,"undefined"==typeof window?wb=null:(function(a,b,c){var d,e;if(!c.requestAnimationFrame){for(d=0;d<a.length&&!c.requestAnimationFrame;++d)c.requestAnimationFrame=c[a[d]+"RequestAnimationFrame"];c.requestAnimationFrame||(e=c.setTimeout,c.requestAnimationFrame=function(a){var c,d,f;return c=Date.now(),d=Math.max(0,16-(c-b)),f=e(function(){a(c+d)},d),b=c+d,f})}}(k,0,window),wb=window.requestAnimationFrame),xb=wb,yb="undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?function(){return window.performance.now()}:function(){return Date.now()},zb={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},complete:{deprecated:"complete",replacement:"oncomplete"}},Ab.prototype.fire=function(a,b){function c(c){return a[c]?(b?a[c](b):a[c](),!0):void 0}c(this.method),!a[this.method]&&this.deprecate&&c(this.deprecate.deprecated)&&(this.deprecate.message?W(this.deprecate.message):W('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',this.deprecate.deprecated,this.deprecate.replacement)),b?a.fire(this.event,b):a.fire(this.event)},Jb={},Kb={},Lb={},"function"==typeof Promise?Ib=Promise:(Ib=function(a){var e,f,g,h,i,j,b=[],c=[],d=Jb;g=function(a){return function(g){d===Jb&&(e=g,d=a,f=Ob(d===Kb?b:c,e),Nb(f))}},h=g(Kb),i=g(Lb);try{a(h,i)}catch(k){i(k)}return j={then:function(a,e){var g=new Ib(function(h,i){var j=function(a,b,c){"function"==typeof a?b.push(function(b){var c;try{c=a(b),Pb(g,c,h,i)}catch(d){i(d)}}):b.push(c)};j(a,b,h),j(e,c,i),d!==Jb&&Nb(f)});return g}},j["catch"]=function(a){return this.then(null,a)},j},Ib.all=function(a){return new Ib(function(b,c){var e,f,g,d=[];if(!a.length)return b(d),void 0;for(g=function(a,f){a&&"function"==typeof a.then?a.then(function(a){d[f]=a,--e||b(d)},c):(d[f]=a,--e||b(d))},e=f=a.length;f--;)g(a[f],f)})},Ib.resolve=function(a){return new Ib(function(b){b(a)})},Ib.reject=function(a){return new Ib(function(b,c){c(a)})}),Mb=Ib,Qb=function(a){do if(void 0!==a.context)return a.context;while(a=a.parent);return rb},Zb=function(a,b){this.callback=a,this.parent=b,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.decoratorQueue=[],this.outrosComplete=!1,b&&b.addChild(this)},Zb.prototype={addChild:function(a){this.children.push(a),this.totalChildren+=1,this.outroChildren+=1},decrementOutros:function(){this.outroChildren-=1,ac(this)},decrementTotal:function(){this.totalChildren-=1,ac(this)},add:function(a){var b=a.isIntro?this.intros:this.outros;b.push(a)},addDecorator:function(a){this.decoratorQueue.push(a)},remove:function(a){var b=a.isIntro?this.intros:this.outros;Gb(b,a),ac(this)},init:function(){this.ready=!0,ac(this)},detachNodes:function(){this.decoratorQueue.forEach(Wb),this.detachQueue.forEach($b),this.children.forEach(_b)}},dc=[],ec=new Ab("change"),cc={start:function(a,b){var c,d;return b&&(c=new Mb(function(a){return d=a})),bc={previousBatch:bc,transitionManager:new Zb(d,bc&&bc.transitionManager),views:[],tasks:[],ractives:[],instance:a},a&&bc.ractives.push(a),c},end:function(){fc(),bc.transitionManager.init(),!bc.previousBatch&&bc.instance&&(bc.instance.viewmodel.changes=[]),bc=bc.previousBatch},addRactive:function(a){bc&&Bb(bc.ractives,a)},registerTransition:function(a){a._manager=bc.transitionManager,bc.transitionManager.add(a)},registerDecorator:function(a){bc.transitionManager.addDecorator(a)},addView:function(a){bc.views.push(a)},addUnresolved:function(a){dc.push(a)},removeUnresolved:function(a){Gb(dc,a)},detachWhenReady:function(a){bc.transitionManager.detachQueue.push(a)},scheduleTask:function(a,b){var c;if(bc){for(c=bc;b&&c.previousBatch;)c=c.previousBatch;c.tasks.push(a)}else a()}},ic=[],jc={tick:function(){var a,b,c;for(c=yb(),cc.start(),a=0;a<ic.length;a+=1)b=ic[a],b.tick(c)||ic.splice(a--,1);cc.end(),ic.length?xb(jc.tick):jc.running=!1
},add:function(a){ic.push(a),jc.running||(jc.running=!0,xb(jc.tick))},abort:function(a,b){for(var d,c=ic.length;c--;)d=ic[c],d.root===b&&d.keypath===a&&d.stop()}},kc=jc,lc=function(a){var b;this.startTime=Date.now();for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);this.interpolator=bb(this.from,this.to,this.root,this.interpolator),this.running=!0,this.tick()},lc.prototype={tick:function(){var a,b,c,d,e,f;return f=this.keypath,this.running?(d=Date.now(),a=d-this.startTime,a>=this.duration?(null!==f&&(cc.start(this.root),this.root.viewmodel.set(f,this.to),cc.end()),this.step&&this.step(1,this.to),this.complete(this.to),e=this.root._animations.indexOf(this),-1===e&&W("Animation was not found"),this.root._animations.splice(e,1),this.running=!1,!1):(b=this.easing?this.easing(a/this.duration):a/this.duration,null!==f&&(c=this.interpolator(b),cc.start(this.root),this.root.viewmodel.set(f,c),cc.end()),this.step&&this.step(b,c),!0)):!1},stop:function(){var a;this.running=!1,a=this.root._animations.indexOf(this),-1===a&&W("Animation was not found"),this.root._animations.splice(a,1)}},mc=oc,nc={stop:M},qc=sc,rc=new Ab("detach"),tc=uc,vc=wc,xc=function(){var a,b,c;a=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],b=this.selector,c=a.indexOf(b),-1!==c&&(a.splice(c,1),a[b]=null)},yc=function(a,b){var c,d,e,f,g,h,i,j,k,l;for(c=Ac(a.component||a._ractive.proxy),d=Ac(b.component||b._ractive.proxy),e=Fb(c),f=Fb(d);e&&e===f;)c.pop(),d.pop(),g=e,e=Fb(c),f=Fb(d);if(e=e.component||e,f=f.component||f,k=e.parentFragment,l=f.parentFragment,k===l)return h=k.items.indexOf(e),i=l.items.indexOf(f),h-i||c.length-d.length;if(j=g.fragments)return h=j.indexOf(k),i=j.indexOf(l),h-i||c.length-d.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")},Bc=function(a,b){var c;return a.compareDocumentPosition?(c=a.compareDocumentPosition(b),2&c?1:-1):yc(a,b)},Cc=function(){this.sort(this._isComponentQuery?yc:Bc),this._dirty=!1},Dc=function(){var a=this;this._dirty||(this._dirty=!0,cc.scheduleTask(function(){a._sort()}))},Ec=function(a){var b=this.indexOf(this._isComponentQuery?a.instance:a);-1!==b&&this.splice(b,1)},Gc=Hc,Ic=Jc,Kc=Lc,Mc=Nc,Oc=Pc,Qc={enqueue:function(a,b){a.event&&(a._eventQueue=a._eventQueue||[],a._eventQueue.push(a.event)),a.event=b},dequeue:function(a){a._eventQueue&&a._eventQueue.length?a.event=a._eventQueue.pop():delete a.event}},Uc=Vc,Wc=Yc,Xc={capture:!0,noUnwrap:!0,fullRootGet:!0},Zc=_c,$c=new Ab("insert"),bd=cd,dd=function(a,b,c,d){this.root=a,this.keypath=b,this.callback=c,this.defer=d.defer,this.context=d&&d.context?d.context:a},dd.prototype={init:function(a){this.value=this.root.get(this.keypath.str),a!==!1?this.update():this.oldValue=this.value},setValue:function(a){var b=this;J(a,this.value)||(this.value=a,this.defer&&this.ready?cc.scheduleTask(function(){return b.update()}):this.update())},update:function(){this.updating||(this.updating=!0,this.callback.call(this.context,this.value,this.oldValue,this.keypath.str),this.oldValue=this.value,this.updating=!1)}},gd=Array.prototype.slice,fd=function(a,b,c,d){this.root=a,this.callback=c,this.defer=d.defer,this.keypath=b,this.regex=new RegExp("^"+b.str.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$"),this.values={},this.defer&&(this.proxies=[]),this.context=d&&d.context?d.context:a},fd.prototype={init:function(a){var b,c;if(b=ed(this.root,this.keypath),a!==!1)for(c in b)b.hasOwnProperty(c)&&this.update(nb(c));else this.values=b},update:function(a){var c,b=this;if(a.isPattern){c=ed(this.root,a);for(a in c)c.hasOwnProperty(a)&&this.update(nb(a))}else if(!this.root.viewmodel.implicitChanges[a.str])return this.defer&&this.ready?(cc.scheduleTask(function(){return b.getProxy(a).update()}),void 0):(this.reallyUpdate(a),void 0)},reallyUpdate:function(a){var b,c,d,e;return b=a.str,c=this.root.viewmodel.get(a),this.updating?(this.values[b]=c,void 0):(this.updating=!0,J(c,this.values[b])&&this.ready||(d=gd.call(this.regex.exec(b),1),e=[c,this.values[b],b].concat(d),this.values[b]=c,this.callback.apply(this.context,e)),this.updating=!1,void 0)},getProxy:function(a){var b=this;return this.proxies[a.str]||(this.proxies[a.str]={update:function(){return b.reallyUpdate(a)}}),this.proxies[a.str]}},hd={},jd=kd,ld=md,nd=function(a){return a.trim()},od=function(a){return""!==a},pd=qd,rd=sd,td=ud,xd=Array.prototype,yd=function(a){return function(b){var c,d,e,f,h,i,j,g;for(c=arguments.length,d=Array(c>1?c-1:0),e=1;c>e;e++)d[e-1]=arguments[e];if(g=[],b=nb(qb(b)),f=this.viewmodel.get(b),h=f.length,!H(f))throw new Error("Called ractive."+a+"('"+b.str+"'), but '"+b.str+"' does not refer to an array");return g=vd(f,a,d),j=xd[a].apply(f,d),i=cc.start(this,!0).then(function(){return j}),g?this.viewmodel.smartUpdate(b,f,g):this.viewmodel.mark(b),cc.end(),i}},zd=yd("pop"),Ad=yd("push"),Hd="/* Ractive.js component styles */\n",Id=[],Jd=!1,e?(Dd=document.createElement("style"),Dd.type="text/css",Ed=document.getElementsByTagName("head")[0],Gd=!1,Fd=Dd.styleSheet,Cd=function(){var a=Hd+Id.map(function(a){return"\n/* {"+a.id+"} */\n"+a.styles}).join("\n");Fd?Fd.cssText=a:Dd.innerHTML=a,Gd||(Ed.appendChild(Dd),Gd=!0)},Bd={add:function(a){Id.push(a),Jd=!0},apply:function(){Jd&&(Cd(),Jd=!1)}}):Bd=null,Kd=Nd,Ld=new Ab("render"),Md=new Ab("complete"),Pd={extend:function(a,b,c){b.adapt=Qd(b.adapt,Eb(c.adapt))},init:function(){}},Rd=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,Sd=/\/\*.*?\*\//g,Td=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~\(]+(?:\([^\)]+\))?)?\s*[\s\+\>\~]?)\s*/g,Ud=/^@media/,Vd=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g,Zd=1,$d={name:"css",extend:function(a,b,c){var d,e;c.css&&(d=Zd++,e=c.noCssTransform?c.css:Wd(c.css,d),b.cssId=d,Bd.add({id:d,styles:e}))},init:function(){}},ae={name:"data",extend:function(a,b,c){var d=void 0,e=void 0;if(c.data&&L(c.data))for(d in c.data)e=c.data[d],e&&"object"==typeof e&&(L(e)||H(e))&&W("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }");b.data=be(b.data,c.data)},init:function(a,b,c){var d=be(a.prototype.data,c.data);return"function"==typeof d&&(d=d.call(b)),d||{}},reset:function(a){var b=this.init(a.constructor,a,a.viewmodel);return a.viewmodel.reset(b),!0}},ge=/^\s+/,fe=function(a){this.name="ParseError",this.message=a;try{throw new Error(a)}catch(b){this.stack=b.stack}},fe.prototype=Error.prototype,ee=function(a,b){var c,d,e=0;for(this.str=a,this.options=b||{},this.pos=0,this.lines=this.str.split("\n"),this.lineEnds=this.lines.map(function(a){var b=e+a.length+1;return e=b,b},0),this.init&&this.init(a,b),c=[];this.pos<this.str.length&&(d=this.read());)c.push(d);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(c,b):c},ee.prototype={read:function(a){var b,c,d,e;for(a||(a=this.converters),b=this.pos,d=a.length,c=0;d>c;c+=1)if(this.pos=b,e=a[c](this))return e;return null},getLinePos:function(a){for(var d,b=0,c=0;a>=this.lineEnds[b];)c=this.lineEnds[b],b+=1;return d=a-c,[b+1,d+1,a]},error:function(a){var b=this.getLinePos(this.pos),c=b[0],d=b[1],e=this.lines[b[0]-1],f=0,g=e.replace(/\t/g,function(a,c){return c<b[1]&&(f+=1),"  "})+"\n"+new Array(b[1]+f).join(" ")+"^----",h=new fe(""+a+" at line "+c+" character "+d+":\n"+g);throw h.line=b[0],h.character=b[1],h.shortMessage=a,h},matchString:function(a){return this.str.substr(this.pos,a.length)===a?(this.pos+=a.length,a):void 0},matchPattern:function(a){var b;return(b=a.exec(this.remaining()))?(this.pos+=b[0].length,b[1]||b[0]):void 0},allowWhitespace:function(){this.matchPattern(ge)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},ee.extend=function(a){var c,d,b=this;c=function(a,b){ee.call(this,a,b)},c.prototype=y(b.prototype);for(d in a)E.call(a,d)&&(c.prototype[d]=a[d]);return c.extend=ee.extend,c},he=1,ie=2,je=3,ke=4,le=5,me=6,ne=7,oe=8,pe=9,qe=10,re=13,se=14,te=15,ue=16,ve=17,we=18,xe=20,ye=21,ze=22,Ae=23,Be=24,Ce=25,De=26,Ee=27,Fe=30,Ge=31,He=32,Ie=33,Je=34,Ke=35,Le=36,Me=40,Ne=50,Oe=51,Pe=52,Qe=53,Re=54,Se=60,Te=61,Ue=/^[^\s=]+/,Ve=/^\s+/,Xe=Ze,Ye=/^(\/(?:[^\n\r\u2028\u2029/\\[]|\\.|\[(?:[^\n\r\u2028\u2029\]\\]|\\.)*])+\/(?:([gimuy])(?![a-z]*\2))*(?![a-zA-Z_$0-9]))/,$e={t:qe,exclude:!0},bf="Expected a JavaScript expression",cf="Expected closing paren",df=ff,ef=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,hf=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,jf=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,kf=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/,lf=function(a){return function(b){var c,d,e,f;for(c=b.pos,d='"',e=!1;!e;)f=b.matchPattern(hf)||b.matchPattern(jf)||b.matchString(a),f?d+='"'===f?'\\"':"\\'"===f?"'":f:(f=b.matchPattern(kf),f?d+="\\u"+("000"+f.charCodeAt(1).toString(16)).slice(-4):e=!0);return d+='"',JSON.parse(d)}},mf=lf('"'),nf=lf("'"),of=function(a){var b,c;return b=a.pos,a.matchString('"')?(c=nf(a),a.matchString('"')?{t:ye,v:c}:(a.pos=b,null)):a.matchString("'")?(c=mf(a),a.matchString("'")?{t:ye,v:c}:(a.pos=b,null)):null},pf=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,qf=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,sf=tf,vf=function(a){var b,c;return b=a.pos,a.allowWhitespace(),a.matchString("{")?(c=uf(a),a.allowWhitespace(),a.matchString("}")?{t:Ae,m:c}:(a.pos=b,null)):(a.pos=b,null)},xf=function(a){var b,c;return b=a.pos,a.allowWhitespace(),a.matchString("[")?(c=wf(a),a.matchString("]")?{t:ze,m:c}:(a.pos=b,null)):(a.pos=b,null)},zf=/^(?:~\/|(?:\.\.\/)+|\.\/(?:\.\.\/)*|\.)/,Af=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)\b/,Bf=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/,Cf=/^[a-zA-Z$_0-9]+(?:(?:\.[a-zA-Z$_0-9]+)|(?:\[[0-9]+\]))*/,Df=/^[a-zA-Z_$][-a-zA-Z_$0-9]*/,Gf=function(a){return yf(a)||Ef(a)||Ff(a)},If=function(a){var b,c,d,e;if(c=Gf(a),!c)return null;for(;c;)if(b=a.pos,d=Hf(a))c={t:He,x:c,r:d};else{if(!a.matchString("("))break;a.allowWhitespace(),e=wf(a),a.allowWhitespace(),a.matchString(")")||a.error(cf),c={t:Me,x:c},e&&(c.o=e)}return c},Kf=function(a,b){return function(c){var d;return(d=b(c))?d:c.matchString(a)?(c.allowWhitespace(),d=Qf(c),d||c.error(bf),{s:a,o:d,t:Ie}):null}},function(){var a,b,c,d,e;for(d="! ~ + - typeof".split(" "),e=If,a=0,b=d.length;b>a;a+=1)c=Kf(d[a],e),e=c;Jf=e}(),Lf=Jf,Nf=function(a,b){return function(c){var d,e,f;if(e=b(c),!e)return null;for(;;){if(d=c.pos,c.allowWhitespace(),!c.matchString(a))return c.pos=d,e;if("in"===a&&/[a-zA-Z_$0-9]/.test(c.remaining().charAt(0)))return c.pos=d,e;if(c.allowWhitespace(),f=b(c),!f)return c.pos=d,e;e={t:Le,s:a,o:[e,f]}}}},function(){var a,b,c,d,e;for(d="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),e=Lf,a=0,b=d.length;b>a;a+=1)c=Nf(d[a],e),e=c;Mf=e}(),Of=Pf,Tf=/^[0-9][1-9]*$/,Zf=$f,bg=/^yield\s*/,eg=gg,fg=/^\s*else\s*/,hg=jg,ig=/^\s*elseif\s+/,kg={each:Pe,"if":Ne,"if-with":Re,"with":Qe,unless:Oe},lg=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,mg=/^\s*,\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,ng=new RegExp("^("+Object.keys(kg).join("|")+")\\b"),tg="<!--",ug="-->",wg=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i,xg=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,yg={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},zg=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],Ag=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(yg).join("|")+"));?","g"),Bg=/</g,Cg=/>/g,Dg=/&/g,Hg=/^\s*\r?\n/,Ig=/\r?\n\s*$/,Jg=function(a){var b,c,d,e,f;for(b=1;b<a.length;b+=1)c=a[b],d=a[b-1],e=a[b-2],Kg(c)&&Lg(d)&&Kg(e)&&Ig.test(e)&&Hg.test(c)&&(a[b-2]=e.replace(Ig,"\n"),a[b]=c.replace(Hg,"")),Mg(c)&&Kg(d)&&Ig.test(d)&&Kg(c.f[0])&&Hg.test(c.f[0])&&(a[b-1]=d.replace(Ig,"\n"),c.f[0]=c.f[0].replace(Hg,"")),Kg(c)&&Mg(d)&&(f=Fb(d.f),Kg(f)&&Ig.test(f)&&Hg.test(c)&&(d.f[d.f.length-1]=f.replace(Ig,"\n"),a[b]=c.replace(Hg,"")));return a},Ng=/^[ \t\f\r\n]+/,Og=/[ \t\f\r\n]+$/,Pg=function(a,b,c){var d;b&&(d=a[0],"string"==typeof d&&(d=d.replace(Ng,""),d?a[0]=d:a.shift())),c&&(d=Fb(a),"string"==typeof d&&(d=d.replace(Og,""),d?a[a.length-1]=d:a.pop()))},Qg=/[ \t\f\r\n]+/g,Rg=/^(?:pre|script|style|textarea)$/i,Sg=/^\s+/,Tg=/\s+$/,Vg=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/,Xg=function(a,b){var c,d,e;for(c=b.length;c--;){if(d=a.indexOf(b[c]),!d)return 0;-1!==d&&(!e||e>d)&&(e=d)}return e||-1},Yg=/^[^\s"'>\/=]+/,Zg=/^[^\s"'=<>`]+/,fh={"true":!0,"false":!1,undefined:void 0,"null":null},gh=new RegExp("^(?:"+Object.keys(fh).join("|")+")"),hh=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,ih=/\$\{([^\}]+)\}/g,jh=/^\$\{([^\}]+)\}/,kh=/^\s*$/,eh=ee.extend({init:function(a,b){this.values=b.values,this.allowWhitespace()},postProcess:function(a){return 1===a.length&&kh.test(this.leftover)?{value:a[0].v}:null},converters:[function(a){var b;return a.values?(b=a.matchPattern(jh),b&&a.values.hasOwnProperty(b)?{v:a.values[b]}:void 0):null},function(a){var b;return(b=a.matchPattern(gh))?{v:fh[b]}:void 0},function(a){var b;return(b=a.matchPattern(hh))?{v:+b}:void 0},function(a){var c,b=of(a);return b&&(c=a.values)?{v:b.v.replace(ih,function(a,b){return b in c?c[b]:b})}:b},function(a){var b,c;if(!a.matchString("{"))return null;if(b={},a.allowWhitespace(),a.matchString("}"))return{v:b};for(;c=lh(a);){if(b[c.key]=c.value,a.allowWhitespace(),a.matchString("}"))return{v:b};if(!a.matchString(","))return null}return null},function(a){var b,c;if(!a.matchString("["))return null;if(b=[],a.allowWhitespace(),a.matchString("]"))return{v:b};for(;c=a.read();){if(b.push(c.v),a.allowWhitespace(),a.matchString("]"))return{v:b};if(!a.matchString(","))return null;a.allowWhitespace()}return null}]}),mh=function(a,b){var c=new eh(a,{values:b});return c.result},nh=/^([a-zA-Z_$][a-zA-Z_$0-9]*)\(/,oh=/\)\s*$/,ph=ee.extend({converters:[Qf]}),rh=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,sh=/^[\s\n\/>]/,th=/^on/,uh=/^on-([a-zA-Z\\*\\.$_][a-zA-Z\\*\\.$_0-9\-]+)$/,vh=/^(?:change|reset|teardown|update|construct|config|init|render|unrender|detach|insert)$/,wh={"intro-outro":"t0",intro:"t1",outro:"t2",decorator:"o"},xh={exclude:!0},yh={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rt","rp"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tfoot:["tbody"],tr:["tr","tbody"],td:["td","th","tr"],th:["td","th","tr"]},Ch=/[-/\\^$*+?.()|[\]{}]/g,Eh=/^<!--\s*/,Fh=/s*>\s*([a-zA-Z_$][-a-zA-Z_$0-9]*)\s*/,Gh=/\s*-->/,Jh=/^#\s*partial\s+/,Mh=[Yf,Xf,og,cg,ag,Zf],Nh=[Wf],Oh=[Xf,og,ag],Ph=void 0,Rh=[_e,vg,zh,Bh],Sh=[Ih,Kh],Ph=ee.extend({init:function(a,b){var c=b.tripleDelimiters||["{{{","}}}"],d=b.staticDelimiters||["[[","]]"],e=b.staticTripleDelimiters||["[[[","]]]"];this.standardDelimiters=b.delimiters||["{{","}}"],this.tags=[{isStatic:!1,isTriple:!1,open:this.standardDelimiters[0],close:this.standardDelimiters[1],readers:Mh},{isStatic:!1,isTriple:!0,open:c[0],close:c[1],readers:Nh},{isStatic:!0,isTriple:!1,open:d[0],close:d[1],readers:Oh},{isStatic:!0,isTriple:!0,open:e[0],close:e[1],readers:Nh}],this.sortMustacheTags(),this.sectionDepth=0,this.elementStack=[],this.interpolate={script:!b.interpolate||b.interpolate.script!==!1,style:!b.interpolate||b.interpolate.style!==!1},b.sanitize===!0&&(b.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),this.stripComments=b.stripComments!==!1,this.preserveWhitespace=b.preserveWhitespace,this.sanitizeElements=b.sanitize&&b.sanitize.elements,this.sanitizeEventAttributes=b.sanitize&&b.sanitize.eventAttributes,this.includeLinePositions=b.includeLinePositions},postProcess:function(b){return b.length?(this.sectionDepth>0&&this.error("A section was left open"),Ug(b[0].t,this.stripComments,this.preserveWhitespace,!this.preserveWhitespace,!this.preserveWhitespace),b[0]):{t:[],v:a}},converters:[Lh],sortMustacheTags:function(){this.tags.sort(function(a,b){return b.open.length-a.open.length})}}),Th=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters","interpolate"],Uh={parse:Wh,fromId:Xh,isHashedId:Yh,isParsed:Zh,getParseOptions:$h,createHelper:Vh},_h=Uh,ai={name:"template",extend:function(a,b,c){var d;"template"in c&&(d=c.template,b.template="function"==typeof d?d:ei(d,b))},init:function(a,b,c){var d,e;d="template"in c?c.template:a.prototype.template,"function"==typeof d&&(e=d,d=ci(b,e),b._config.template={fn:e,result:d}),d=ei(d,b),b.template=d.t,d.p&&fi(b.partials,d.p)},reset:function(a){var c,b=bi(a);return b?(c=ei(b,a),a.template=c.t,fi(a.partials,c.p,!0),!0):void 0}},gi=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"],hi=function(a,b){this.name=a,this.useDefaults=b},hi.prototype={constructor:hi,extend:function(a,b,c){this.configure(this.useDefaults?a.defaults:a,this.useDefaults?b:b.constructor,c)},init:function(){},configure:function(a,b,c){var g,d=this.name,e=c[d],f=y(a[d]);for(g in e)f[g]=e[g];b[d]=f},reset:function(a){var b=a[this.name],c=!1;return Object.keys(b).forEach(function(a){var d=b[a];d._fn&&(d._fn.isOwner?b[a]=d._fn:delete b[a],c=!0)}),c}},ii=gi.map(function(a){return new hi(a,"computed"===a)}),ji=ki,si={adapt:Pd,css:$d,data:ae,template:ai},ri=Object.keys(c),ui=xi(ri.filter(function(a){return!si[a]})),ti=xi(ri.concat(ii.map(function(a){return a.name}))),qi=[].concat(ri.filter(function(a){return!ii[a]&&!si[a]}),ii,si.data,si.template,si.css),pi={extend:function(a,b,c){return vi("extend",a,b,c)},init:function(a,b,c){return vi("init",a,b,c)},reset:function(a){return qi.filter(function(b){return b.reset&&b.reset(a)}).map(function(a){return a.name})},order:qi},yi=zi,Ai=Bi,Ci=Di,Ei=Fi,Gi=Hi,Ii=Ji,Ki=Li,Mi=Ni,Pi=Qi,Ri=Si,Ti=Ui,Vi=function(){return w(this.node)},Wi=function(a){this.type=he,this.text=a.template},Wi.prototype={detach:Vi,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createTextNode(this.text)),this.node},toString:function(a){return a?Gg(this.text):this.text},unrender:function(a){return a?this.detach():void 0}},Xi=Yi,Zi=$i,_i=function(a,b,c){var d;this.ref=b,this.resolved=!1,this.root=a.root,this.parentFragment=a.parentFragment,this.callback=c,d=Rb(a.root,b,a.parentFragment),void 0!=d?this.resolve(d):cc.addUnresolved(this)},_i.prototype={resolve:function(a){this.keypath&&!a&&cc.addUnresolved(this),this.resolved=!0,this.keypath=a,this.callback(a)},forceResolution:function(){this.resolve(nb(this.ref))},rebind:function(a,b){var c;void 0!=this.keypath&&(c=this.keypath.replace(a,b),void 0!==c&&this.resolve(c))},unbind:function(){this.resolved||cc.removeUnresolved(this)}},aj=function(a,b,c){this.parentFragment=a.parentFragment,this.ref=b,this.callback=c,this.rebind()},bj={"@keypath":{prefix:"c",prop:["context"]},"@index":{prefix:"i",prop:["index"]},"@key":{prefix:"k",prop:["key","index"]}},aj.prototype={rebind:function(){var d,a=this.ref,b=this.parentFragment,c=bj[a];if(!c)throw new Error('Unknown special reference "'+a+'" - valid references are @index, @key and @keypath');if(this.cached)return this.callback(nb("@"+c.prefix+cj(this.cached,c)));if(-1!==c.prop.indexOf("index")||-1!==c.prop.indexOf("key"))for(;b;){if(b.owner.currentSubtype===Pe&&void 0!==(d=cj(b,c)))return this.cached=b,b.registerIndexRef(this),this.callback(nb("@"+c.prefix+d));b=!b.parent&&b.owner&&b.owner.component&&b.owner.component.parentFragment&&!b.owner.component.instance.isolated?b.owner.component.parentFragment:b.parent}else for(;b;){if(void 0!==(d=cj(b,c)))return this.callback(nb("@"+c.prefix+d.str));b=b.parent}},unbind:function(){this.cached&&this.cached.unregisterIndexRef(this)}},dj=function(a,b,c){this.parentFragment=a.parentFragment,this.ref=b,this.callback=c,b.ref.fragment.registerIndexRef(this),this.rebind()},dj.prototype={rebind:function(){var a,b=this.ref.ref;a="k"===b.ref.t?"k"+b.fragment.key:"i"+b.fragment.index,void 0!==a&&this.callback(nb("@"+a))},unbind:function(){this.ref.ref.fragment.unregisterIndexRef(this)}},ej.resolve=function(a){var c,d,b={};for(c in a.refs)d=a.refs[c],b[d.ref.n]="k"===d.ref.t?d.fragment.key:d.fragment.index;return b},gj={},jj=Function.prototype.bind,ij=function(a,b,c,d){var e=this,f=a.root;this.root=f,this.parentFragment=b,this.callback=d,this.owner=a,this.str=c.s,this.keypaths=[],this.pending=c.r.length,this.refResolvers=c.r.map(function(a,b){return fj(e,a,function(a){e.resolve(b,a)})}),this.ready=!0,this.bubble()},ij.prototype={bubble:function(){this.ready&&(this.uniqueString=lj(this.str,this.keypaths),this.keypath=mj(this.uniqueString),this.createEvaluator(),this.callback(this.keypath))},unbind:function(){for(var a;a=this.refResolvers.pop();)a.unbind()},resolve:function(a,b){this.keypaths[a]=b,this.bubble()},createEvaluator:function(){var c,d,f,a=this,e=this.keypath,b=this.root.viewmodel.computations[e.str];b?this.root.viewmodel.mark(e):(f=hj(this.str,this.refResolvers.length),c=this.keypaths.map(function(b){var c;return"undefined"===b?function(){return void 0}:b.isSpecial?(c=b.value,function(){return c}):function(){var c=a.root.viewmodel.get(b,{noUnwrap:!0,fullRootGet:!0});return"function"==typeof c&&(c=oj(c,a.root)),c}}),d={deps:this.keypaths.filter(nj),getter:function(){var a=c.map(kj);return f.apply(null,a)}},b=this.root.viewmodel.compute(e,d))},rebind:function(a,b){this.refResolvers.forEach(function(c){return c.rebind(a,b)})}},pj=function(a,b,c){var d=this;this.resolver=b,this.root=b.root,this.parentFragment=c,this.viewmodel=b.root.viewmodel,"string"==typeof a?this.value=a:a.t===Fe?this.refResolver=fj(this,a.n,function(a){d.resolve(a)}):new ij(b,c,a,function(a){d.resolve(a)})},pj.prototype={resolve:function(a){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.keypath=a,this.value=this.viewmodel.get(a),this.bind(),this.resolver.bubble()},bind:function(){this.viewmodel.register(this.keypath,this)},rebind:function(a,b){this.refResolver&&this.refResolver.rebind(a,b)},setValue:function(a){this.value=a,this.resolver.bubble()},unbind:function(){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.refResolver&&this.refResolver.unbind()},forceResolution:function(){this.refResolver&&this.refResolver.forceResolution()}},qj=function(a,b,c){var e,f,g,h,d=this;this.parentFragment=h=a.parentFragment,this.root=e=a.root,this.mustache=a,this.ref=f=b.r,this.callback=c,this.unresolved=[],(g=Rb(e,f,h))?this.base=g:this.baseResolver=new _i(this,f,function(a){d.base=a,d.baseResolver=null,d.bubble()}),this.members=b.m.map(function(a){return new pj(a,d,h)}),this.ready=!0,this.bubble()},qj.prototype={getKeypath:function(){var a=this.members.map(rj);return!a.every(sj)||this.baseResolver?null:this.base.join(a.join("."))},bubble:function(){this.ready&&!this.baseResolver&&this.callback(this.getKeypath())},unbind:function(){this.members.forEach(Xb)},rebind:function(a,b){var c,d;this.base&&(d=this.base.replace(a,b),d&&d!==this.base&&(this.base=d,c=!0)),this.members.forEach(function(d){d.rebind(a,b)&&(c=!0)}),c&&this.bubble()},forceResolution:function(){this.baseResolver&&(this.base=nb(this.ref),this.baseResolver.unbind(),this.baseResolver=null),this.members.forEach(tj),this.bubble()}},uj=vj,wj=xj,yj=zj,Aj={getValue:Zi,init:uj,resolve:wj,rebind:yj},Bj=function(a){this.type=ie,Aj.init(this,a)},Bj.prototype={update:function(){this.node.data=void 0==this.value?"":this.value},resolve:Aj.resolve,rebind:Aj.rebind,detach:Vi,unbind:Xi,render:function(){return this.node||(this.node=document.createTextNode(x(this.value))),this.node},unrender:function(a){a&&w(this.node)},getValue:Aj.getValue,setValue:function(a){var b;this.keypath&&(b=this.root.viewmodel.wrapped[this.keypath.str])&&(a=b.get()),J(a,this.value)||(this.value=a,this.parentFragment.bubble(),this.node&&cc.addView(this))},firstNode:function(){return this.node},toString:function(a){var b=""+x(this.value);return a?Gg(b):b}},Cj=Dj,Ej=Fj,Gj=Hj,Ij=Jj,Kj=Lj,Mj=Nj,Oj=Pj,Qj=Rj,Sj=Tj,Vj=function(a,b){Aj.rebind.call(this,a,b)},Wj=Xj,Yj=Zj,ik=jk,kk=lk,mk=nk,qk=rk,sk=function(a){this.type=ke,this.subtype=this.currentSubtype=a.template.n,this.inverted=this.subtype===Oe,this.pElement=a.pElement,this.fragments=[],this.fragmentsToCreate=[],this.fragmentsToRender=[],this.fragmentsToUnrender=[],a.template.i&&(this.indexRefs=a.template.i.split(",").map(function(a,b){return{n:a,t:0===b?"k":"i"}})),this.renderedFragments=[],this.length=0,Aj.init(this,a)},sk.prototype={bubble:Cj,detach:Ej,find:Gj,findAll:Ij,findAllComponents:Kj,findComponent:Mj,findNextNode:Oj,firstNode:Qj,getIndexRef:function(a){var b,c;if(this.indexRefs)for(b=this.indexRefs.length;b--;)if(c=this.indexRefs[b],c.n===a)return c},getValue:Aj.getValue,shuffle:Sj,rebind:Vj,render:Wj,resolve:Aj.resolve,setValue:Yj,toString:ik,unbind:kk,unrender:mk,update:qk},tk=uk,vk=wk,xk=yk,zk=Ak,Bk={};try{m("table").innerHTML="foo"}catch(B){Ck=!0,Dk={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}if(Ek=function(a,b,c){var d,f,g,h,j,e=[];if(null!=a&&""!==a){for(Ck&&(f=Dk[b.tagName])?(d=Fk("DIV"),d.innerHTML=f[0]+a+f[1],d=d.querySelector(".x"),"SELECT"===d.tagName&&(g=d.options[d.selectedIndex])):b.namespaceURI===i.svg?(d=Fk("DIV"),d.innerHTML='<svg class="x">'+a+"</svg>",d=d.querySelector(".x")):(d=Fk(b.tagName),d.innerHTML=a,"SELECT"===d.tagName&&(g=d.options[d.selectedIndex]));h=d.firstChild;)e.push(h),c.appendChild(h);if("SELECT"===b.tagName)for(j=e.length;j--;)e[j]!==g&&(e[j].selected=!1)}return e},Ik=Jk,Kk=Lk,Mk=Nk,Ok=Pk,Qk=Rk,Sk=function(a){this.type=je,Aj.init(this,a)},Sk.prototype={detach:tk,find:vk,findAll:xk,firstNode:zk,getValue:Aj.getValue,rebind:Aj.rebind,render:Ik,resolve:Aj.resolve,setValue:Kk,toString:Mk,unbind:Xi,unrender:Ok,update:Qk},Tk=function(){this.parentFragment.bubble()},Uk=Vk,Wk=function(a){return this.node?n(this.node,a)?this.node:this.fragment&&this.fragment.find?this.fragment.find(a):void 0:null},Xk=function(a,b){b._test(this,!0)&&b.live&&(this.liveQueries||(this.liveQueries=[])).push(b),this.fragment&&this.fragment.findAll(a,b)},Yk=function(a,b){this.fragment&&this.fragment.findAllComponents(a,b)},Zk=function(a){return this.fragment?this.fragment.findComponent(a):void 0},$k=_k,al=bl,cl=dl,el=/^true|on|yes|1$/i,fl=/^[0-9]+$/,gl=function(a,b){var c,d,e;return e=b.a||{},d={},c=e.twoway,void 0!==c&&(d.twoway=0===c||el.test(c)),c=e.lazy,void 0!==c&&(d.lazy=0!==c&&fl.test(c)?parseInt(c):0===c||el.test(c)),d},hl=il,jl="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),kl="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),ll=function(a){for(var b={},c=a.length;c--;)b[a[c].toLowerCase()]=a[c];return b},ml=ll(jl.concat(kl)),nl=function(a){var b=a.toLowerCase();return ml[b]||b},ol=function(a,b){var c,d;if(c=b.indexOf(":"),-1===c||(d=b.substr(0,c),"xmlns"===d))a.name=a.element.namespace!==i.html?nl(b):b;else if(b=b.substring(c+1),a.name=nl(b),a.namespace=i[d.toLowerCase()],a.namespacePrefix=d,!a.namespace)throw'Unknown namespace ("'+d+'")'},ql=rl,sl=tl,ul=wl,vl={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},xl=yl,Al=Bl,Cl=Dl,El=Fl,Gl=Hl,Il=Jl,Kl=Ll,Ml=Nl,Ol=Pl,Ql=Rl,Sl=Tl,Ul=Vl,Wl=Xl,Yl=Zl,$l=_l,am=function(a){this.init(a)
    },am.prototype={bubble:hl,init:ql,rebind:sl,render:ul,toString:xl,unbind:Al,update:$l},bm=function(a,b){var c,d,e=[];for(c in b)"twoway"!==c&&"lazy"!==c&&b.hasOwnProperty(c)&&(d=new am({element:a,name:c,value:b[c],root:a.root}),e[c]=d,"value"!==c&&e.push(d));return(d=e.value)&&e.push(d),e},"undefined"!=typeof document&&(cm=m("div")),dm=function(a,b){this.element=a,this.root=a.root,this.parentFragment=a.parentFragment,this.attributes=[],this.fragment=new Kr({root:a.root,owner:this,template:[b]})},dm.prototype={bubble:function(){this.node&&this.update(),this.element.bubble()},rebind:function(a,b){this.fragment.rebind(a,b)},render:function(a){this.node=a,this.isSvg=a.namespaceURI===i.svg,this.update()},unbind:function(){this.fragment.unbind()},update:function(){var a=this,b=this.fragment.toString(),c=em(b,this.isSvg);this.attributes.filter(function(a){return fm(c,a)}).forEach(function(b){a.node.removeAttribute(b.name)}),c.forEach(function(b){a.node.setAttribute(b.name,b.value)}),this.attributes=c},toString:function(){return this.fragment.toString()}},gm=function(a,b){return b?b.map(function(b){return new dm(a,b)}):[]},hm=function(a){var b,c,d,e,f;if(this.element=a,this.root=a.root,this.attribute=a.attributes[this.name||"value"],b=this.attribute.interpolator,b.twowayBinding=this,c=b.keypath){if("}"===c.str.slice(-1))return X("Two-way binding does not work with expressions (`%s` on <%s>)",b.resolver.uniqueString,a.name,{ractive:this.root}),!1;if(c.isSpecial)return X("Two-way binding does not work with %s",b.resolver.ref,{ractive:this.root}),!1}else f=b.template.r?"'"+b.template.r+"' reference":"expression",W("The %s being used for two-way binding is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",f,{ractive:this.root}),b.resolver.forceResolution(),c=b.keypath;this.attribute.isTwoway=!0,this.keypath=c,d=this.root.viewmodel.get(c),void 0===d&&this.getInitialValue&&(d=this.getInitialValue(),void 0!==d&&this.root.viewmodel.set(c,d)),(e=jm(a))&&(this.resetValue=d,e.formBindings.push(this))},hm.prototype={handleChange:function(){var a=this;cc.start(this.root),this.attribute.locked=!0,this.root.viewmodel.set(this.keypath,this.getValue()),cc.scheduleTask(function(){return a.attribute.locked=!1}),cc.end()},rebound:function(){var a,b,c;b=this.keypath,c=this.attribute.interpolator.keypath,b!==c&&(Gb(this.root._twowayBindings[b.str],this),this.keypath=c,a=this.root._twowayBindings[c.str]||(this.root._twowayBindings[c.str]=[]),a.push(this))},unbind:function(){}},hm.extend=function(a){var c,b=this;return c=function(a){hm.call(this,a),this.init&&this.init()},c.prototype=y(b.prototype),C(c.prototype,a),c.extend=hm.extend,c},im=hm,km=lm,mm=im.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},render:function(){var a=this.element.node;a.addEventListener("change",km,!1),this.root.lazy||(a.addEventListener("input",km,!1),a.attachEvent&&a.addEventListener("keyup",km,!1))},unrender:function(){var a=this.element.node;a.removeEventListener("change",km,!1),a.removeEventListener("input",km,!1),a.removeEventListener("keyup",km,!1)},getValue:function(){return this.element.node.innerHTML}}),nm={},pm=im.extend({name:"checked",init:function(){this.siblings=om(this.root._guid,"radio",this.element.getAttribute("name")),this.siblings.push(this)},render:function(){var a=this.element.node;a.addEventListener("change",km,!1),a.attachEvent&&a.addEventListener("click",km,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",km,!1),a.removeEventListener("click",km,!1)},handleChange:function(){cc.start(this.root),this.siblings.forEach(function(a){a.root.viewmodel.set(a.keypath,a.getValue())}),cc.end()},getValue:function(){return this.element.node.checked},unbind:function(){Gb(this.siblings,this)}}),qm=im.extend({name:"name",init:function(){this.siblings=om(this.root._guid,"radioname",this.keypath.str),this.siblings.push(this),this.radioName=!0},getInitialValue:function(){return this.element.getAttribute("checked")?this.element.getAttribute("value"):void 0},render:function(){var a=this.element.node;a.name="{{"+this.keypath.str+"}}",a.checked=this.root.viewmodel.get(this.keypath)==this.element.getAttribute("value"),a.addEventListener("change",km,!1),a.attachEvent&&a.addEventListener("click",km,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",km,!1),a.removeEventListener("click",km,!1)},getValue:function(){var a=this.element.node;return a._ractive?a._ractive.value:a.value},handleChange:function(){this.element.node.checked&&im.prototype.handleChange.call(this)},rebound:function(a,b){var c;im.prototype.rebound.call(this,a,b),(c=this.element.node)&&(c.name="{{"+this.keypath.str+"}}")},unbind:function(){Gb(this.siblings,this)}}),rm=im.extend({name:"name",getInitialValue:function(){return this.noInitialValue=!0,[]},init:function(){var a,b;this.checkboxName=!0,this.siblings=om(this.root._guid,"checkboxes",this.keypath.str),this.siblings.push(this),this.noInitialValue&&(this.siblings.noInitialValue=!0),this.siblings.noInitialValue&&this.element.getAttribute("checked")&&(a=this.root.viewmodel.get(this.keypath),b=this.element.getAttribute("value"),a.push(b))},unbind:function(){Gb(this.siblings,this)},render:function(){var b,c,a=this.element.node;b=this.root.viewmodel.get(this.keypath),c=this.element.getAttribute("value"),this.isChecked=H(b)?Cb(b,c):b==c,a.name="{{"+this.keypath.str+"}}",a.checked=this.isChecked,a.addEventListener("change",km,!1),a.attachEvent&&a.addEventListener("click",km,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",km,!1),a.removeEventListener("click",km,!1)},changed:function(){var a=!!this.isChecked;return this.isChecked=this.element.node.checked,this.isChecked===a},handleChange:function(){this.isChecked=this.element.node.checked,im.prototype.handleChange.call(this)},getValue:function(){return this.siblings.filter(sm).map(tm)}}),um=im.extend({name:"checked",render:function(){var a=this.element.node;a.addEventListener("change",km,!1),a.attachEvent&&a.addEventListener("click",km,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",km,!1),a.removeEventListener("click",km,!1)},getValue:function(){return this.element.node.checked}}),vm=im.extend({getInitialValue:function(){var b,c,d,e,a=this.element.options;if(void 0===this.element.getAttribute("value")&&(c=b=a.length,b)){for(;c--;)if(a[c].getAttribute("selected")){d=a[c].getAttribute("value"),e=!0;break}if(!e)for(;++c<b;)if(!a[c].getAttribute("disabled")){d=a[c].getAttribute("value");break}return void 0!==d&&(this.element.attributes.value.value=d),d}},render:function(){this.element.node.addEventListener("change",km,!1)},unrender:function(){this.element.node.removeEventListener("change",km,!1)},setValue:function(a){this.root.viewmodel.set(this.keypath,a)},getValue:function(){var a,b,c,d,e;for(a=this.element.node.options,c=a.length,b=0;c>b;b+=1)if(d=a[b],a[b].selected)return e=d._ractive?d._ractive.value:d.value},forceUpdate:function(){var a=this,b=this.getValue();void 0!==b&&(this.attribute.locked=!0,cc.scheduleTask(function(){return a.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,b))}}),wm=vm.extend({getInitialValue:function(){return this.element.options.filter(function(a){return a.getAttribute("selected")}).map(function(a){return a.getAttribute("value")})},render:function(){var a;this.element.node.addEventListener("change",km,!1),a=this.root.viewmodel.get(this.keypath),void 0===a&&this.handleChange()},unrender:function(){this.element.node.removeEventListener("change",km,!1)},setValue:function(){throw new Error("TODO not implemented yet")},getValue:function(){var a,b,c,d,e,f;for(a=[],b=this.element.node.options,d=b.length,c=0;d>c;c+=1)e=b[c],e.selected&&(f=e._ractive?e._ractive.value:e.value,a.push(f));return a},handleChange:function(){var a,b,c;return a=this.attribute,b=a.value,c=this.getValue(),void 0!==b&&Db(c,b)||vm.prototype.handleChange.call(this),this},forceUpdate:function(){var a=this,b=this.getValue();void 0!==b&&(this.attribute.locked=!0,cc.scheduleTask(function(){return a.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,b))},updateModel:function(){void 0!==this.attribute.value&&this.attribute.value.length||this.root.viewmodel.set(this.keypath,this.initialValue)}}),xm=im.extend({render:function(){this.element.node.addEventListener("change",km,!1)},unrender:function(){this.element.node.removeEventListener("change",km,!1)},getValue:function(){return this.element.node.files}}),ym=im.extend({getInitialValue:function(){return""},getValue:function(){return this.element.node.value},render:function(){var b,a=this.element.node,c=!1;this.rendered=!0,b=this.root.lazy,this.element.lazy===!0?b=!0:this.element.lazy===!1?b=!1:K(this.element.lazy)?(b=!1,c=+this.element.lazy):K(b||"")&&(c=+b,b=!1,this.element.lazy=c),this.handler=c?Am:km,a.addEventListener("change",km,!1),b||(a.addEventListener("input",this.handler,!1),a.attachEvent&&a.addEventListener("keyup",this.handler,!1)),a.addEventListener("blur",zm,!1)},unrender:function(){var a=this.element.node;this.rendered=!1,a.removeEventListener("change",km,!1),a.removeEventListener("input",this.handler,!1),a.removeEventListener("keyup",this.handler,!1),a.removeEventListener("blur",zm,!1)}}),Bm=ym.extend({getInitialValue:function(){return void 0},getValue:function(){var a=parseFloat(this.element.node.value);return isNaN(a)?void 0:a}}),Em=Fm,Gm=Hm,Im=Jm,Km=Mm,Lm=/^event(?:\.(.+))?/,Rm=Um,Sm={},Tm={touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0,touchleave:!0},Wm=Xm,Ym=Zm,$m=_m,an=bn,cn=dn,en=function(a,b,c){this.init(a,b,c)},en.prototype={bubble:Em,fire:Gm,getAction:Im,init:Km,listen:Rm,rebind:Wm,render:Ym,resolve:$m,unbind:an,unrender:cn},fn=function(a,b){var c,d,e,f,g=[];for(d in b)if(b.hasOwnProperty(d))for(e=d.split("-"),c=e.length;c--;)f=new en(a,e[c],b[d]),g.push(f);return g},gn=function(a,b){var d,e,f,c=this;this.element=a,this.root=d=a.root,e=b.n||b,("string"==typeof e||(f=new Kr({template:e,root:d,owner:a}),e=f.toString(),f.unbind(),""!==e))&&(b.a?this.params=b.a:b.d&&(this.fragment=new Kr({template:b.d,root:d,owner:a}),this.params=this.fragment.getArgsList(),this.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0,c.params=this.getArgsList(),c.ready&&c.update()}),this.fn=_("decorators",d,e),this.fn||S($(e,"decorator")))},gn.prototype={init:function(){var a,b,c;if(a=this.element.node,this.params?(c=[a].concat(this.params),b=this.fn.apply(this.root,c)):b=this.fn.call(this.root,a),!b||!b.teardown)throw new Error("Decorator definition must return an object with a teardown method");this.actual=b,this.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},rebind:function(a,b){this.fragment&&this.fragment.rebind(a,b)},teardown:function(a){this.torndown=!0,this.ready&&this.actual.teardown(),!a&&this.fragment&&this.fragment.unbind()}},on=pn,qn=rn,xn=yn,zn=function(a){return a.replace(/-([a-zA-Z])/g,function(a,b){return b.toUpperCase()})},e?(Bn={},Cn=m("div").style,An=function(a){var b,c,d;if(a=zn(a),!Bn[a])if(void 0!==Cn[a])Bn[a]=a;else for(d=a.charAt(0).toUpperCase()+a.substring(1),b=k.length;b--;)if(c=k[b],void 0!==Cn[c+d]){Bn[a]=c+d;break}return Bn[a]}):An=null,Dn=An,e?(Fn=window.getComputedStyle||legacy.getComputedStyle,En=function(a){var b,c,d,e,f;if(b=Fn(this.node),"string"==typeof a)return f=b[Dn(a)],"0px"===f&&(f=0),f;if(!H(a))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(c={},d=a.length;d--;)e=a[d],f=b[Dn(e)],"0px"===f&&(f=0),c[e]=f;return c}):En=null,Gn=function(a,b){var c;if("string"==typeof a)this.node.style[Dn(a)]=b;else for(c in a)a.hasOwnProperty(c)&&(this.node.style[Dn(c)]=a[c]);return this},Hn=function(a){var b;this.duration=a.duration,this.step=a.step,this.complete=a.complete,"string"==typeof a.easing?(b=a.root.easing[a.easing],b||(X($(a.easing,"easing")),b=In)):b="function"==typeof a.easing?a.easing:In,this.easing=b,this.start=yb(),this.end=this.start+this.duration,this.running=!0,kc.add(this)},Hn.prototype={tick:function(a){var b,c;return this.running?a>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(b=a-this.start,c=this.easing(b/this.duration),this.step&&this.step(c),!0):!1},stop:function(){this.abort&&this.abort(),this.running=!1}},Jn=new RegExp("^-(?:"+k.join("|")+")-"),Kn=function(a){return a.replace(Jn,"")},Ln=new RegExp("^(?:"+k.join("|")+")([A-Z])"),Mn=function(a){var b;return a?(Ln.test(a)&&(a="-"+a),b=a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})):""},Vn={},Wn={},e?(On=m("div").style,function(){void 0!==On.transition?(Pn="transition",Qn="transitionend",Rn=!0):void 0!==On.webkitTransition?(Pn="webkitTransition",Qn="webkitTransitionEnd",Rn=!0):Rn=!1}(),Pn&&(Sn=Pn+"Duration",Tn=Pn+"Property",Un=Pn+"TimingFunction"),Nn=function(a,b,c,d,e){setTimeout(function(){var f,g,h,i,j;i=function(){g&&h&&(a.root.fire(a.name+":end",a.node,a.isIntro),e())},f=(a.node.namespaceURI||"")+a.node.tagName,a.node.style[Tn]=d.map(Dn).map(Mn).join(","),a.node.style[Un]=Mn(c.easing||"linear"),a.node.style[Sn]=c.duration/1e3+"s",j=function(b){var c;c=d.indexOf(zn(Kn(b.propertyName))),-1!==c&&d.splice(c,1),d.length||(a.node.removeEventListener(Qn,j,!1),h=!0,i())},a.node.addEventListener(Qn,j,!1),setTimeout(function(){for(var k,l,m,o,p,e=d.length,n=[];e--;)o=d[e],k=f+o,Rn&&!Wn[k]&&(a.node.style[Dn(o)]=b[o],Vn[k]||(l=a.getStyle(o),Vn[k]=a.getStyle(o)!=b[o],Wn[k]=!Vn[k],Wn[k]&&(a.node.style[Dn(o)]=l))),(!Rn||Wn[k])&&(void 0===l&&(l=a.getStyle(o)),m=d.indexOf(o),-1===m?W("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!",{node:a.node}):d.splice(m,1),p=/[^\d]*$/.exec(b[o])[0],n.push({name:Dn(o),interpolator:bb(parseFloat(l),parseFloat(b[o])),suffix:p}));n.length?new Hn({root:a.root,duration:c.duration,easing:zn(c.easing||""),step:function(b){var c,d;for(d=n.length;d--;)c=n[d],a.node.style[c.name]=c.interpolator(b)+c.suffix},complete:function(){g=!0,i()}}):g=!0,d.length||(a.node.removeEventListener(Qn,j,!1),h=!0,i())},0)},c.delay||0)}):Nn=null,"undefined"!=typeof document){if(Xn="hidden",_n={},Xn in document)Zn="";else for($n=k.length;$n--;)Yn=k[$n],Xn=Yn+"Hidden",Xn in document&&(Zn=Yn);void 0!==Zn?(document.addEventListener(Zn+"visibilitychange",ao),ao()):("onfocusout"in document?(document.addEventListener("focusout",bo),document.addEventListener("focusin",co)):(window.addEventListener("pagehide",bo),window.addEventListener("blur",bo),window.addEventListener("pageshow",co),window.addEventListener("focus",co)),_n.hidden=!1)}e?(fo=window.getComputedStyle||legacy.getComputedStyle,eo=function(a,b,c){var e,f,d=this;if(4===arguments.length)throw new Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");return _n.hidden?(this.setStyle(a,b),go||(go=Mb.resolve())):("string"==typeof a?(e={},e[a]=b):(e=a,c=b),c||(X('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340',this.name),c=this),f=new Mb(function(a){var b,f,g,h,i,j,k;if(!c.duration)return d.setStyle(e),a(),void 0;for(b=Object.keys(e),f=[],g=fo(d.node),i={},j=b.length;j--;)k=b[j],h=g[Dn(k)],"0px"===h&&(h=0),h!=e[k]&&(f.push(k),d.node.style[Dn(k)]=h);return f.length?(Nn(d,e,c,f,a),void 0):(a(),void 0)}))}):eo=null,ho=function(a,b){return"number"==typeof a?a={duration:a}:"string"==typeof a?a="slow"===a?{duration:600}:"fast"===a?{duration:200}:{duration:400}:a||(a={}),D({},a,b)},io=jo,lo=function(a,b,c){this.init(a,b,c)},lo.prototype={init:xn,start:io,getStyle:En,setStyle:Gn,animateStyle:eo,processParams:ho},mo=po,no=function(){var a=this.node,b=this.fragment.toString(!1);if(window&&window.appearsToBeIELessEqual8&&(a.type="text/css"),a.styleSheet)a.styleSheet.cssText=b;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(document.createTextNode(b))}},oo=function(){this.node.type&&"text/javascript"!==this.node.type||W("Script tag was updated. This does not cause the code to be re-evaluated!",{ractive:this.root}),this.node.text=this.fragment.toString(!1)},to=function(){var a,b;return this.template.y?"<!DOCTYPE"+this.template.dd+">":(a="<"+this.template.e,a+=this.attributes.map(wo).join("")+this.conditionalAttributes.map(wo).join(""),"option"===this.name&&uo(this)&&(a+=" selected"),"input"===this.name&&vo(this)&&(a+=" checked"),a+=">","textarea"===this.name&&void 0!==this.getAttribute("value")?a+=Gg(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(a+=this.getAttribute("value")||""),this.fragment&&(b="script"!==this.name&&"style"!==this.name,a+=this.fragment.toString(b)),xg.test(this.template.e)||(a+="</"+this.template.e+">"),a)},xo=yo,zo=Ao,Co=function(a){this.init(a)},Co.prototype={bubble:Tk,detach:Uk,find:Wk,findAll:Xk,findAllComponents:Yk,findComponent:Zk,findNextNode:$k,firstNode:al,getAttribute:cl,init:on,rebind:qn,render:mo,toString:to,unbind:xo,unrender:zo},Do=/^\s*$/,Eo=/^\s*/,Fo=function(a){var b,c,d,e;return b=a.split("\n"),c=b[0],void 0!==c&&Do.test(c)&&b.shift(),d=Fb(b),void 0!==d&&Do.test(d)&&b.pop(),e=b.reduce(Go,null),e&&(a=b.map(function(a){return a.replace(e,"")}).join("\n")),a},Mo=function(a,b){var c;return b?c=a.split("\n").map(function(a,c){return c?b+a:a}).join("\n"):a},No='Could not find template for partial "%s"',Oo=function(a){var b,c;b=this.parentFragment=a.parentFragment,this.root=b.root,this.type=oe,this.index=a.index,this.name=a.template.r,this.rendered=!1,this.fragment=this.fragmentToRender=this.fragmentToUnrender=null,Aj.init(this,a),this.keypath||((c=Ho(this.root,this.name,b))?(Xi.call(this),this.isNamed=!0,this.setTemplate(c)):X(No,this.name))},Oo.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){return this.fragment.detach()},find:function(a){return this.fragment.find(a)},findAll:function(a,b){return this.fragment.findAll(a,b)},findComponent:function(a){return this.fragment.findComponent(a)},findAllComponents:function(a,b){return this.fragment.findAllComponents(a,b)},firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},getPartialName:function(){return this.isNamed&&this.name?this.name:void 0===this.value?this.name:this.value},getValue:function(){return this.fragment.getValue()},rebind:function(a,b){this.isNamed||yj.call(this,a,b),this.fragment&&this.fragment.rebind(a,b)},render:function(){return this.docFrag=document.createDocumentFragment(),this.update(),this.rendered=!0,this.docFrag},resolve:Aj.resolve,setValue:function(a){var b;(void 0===a||a!==this.value)&&(void 0!==a&&(b=Ho(this.root,""+a,this.parentFragment)),!b&&this.name&&(b=Ho(this.root,this.name,this.parentFragment))&&(Xi.call(this),this.isNamed=!0),b||X(No,this.name,{ractive:this.root}),this.value=a,this.setTemplate(b||[]),this.bubble(),this.rendered&&cc.addView(this))},setTemplate:function(a){this.fragment&&(this.fragment.unbind(),this.rendered&&(this.fragmentToUnrender=this.fragment)),this.fragment=new Kr({template:a,root:this.root,owner:this,pElement:this.parentFragment.pElement}),this.fragmentToRender=this.fragment},toString:function(a){var b,c,d,e;return b=this.fragment.toString(a),c=this.parentFragment.items[this.index-1],c&&c.type===he?(d=c.text.split("\n").pop(),(e=/^\s+$/.exec(d))?Mo(b,e[0]):b):b},unbind:function(){this.isNamed||Xi.call(this),this.fragment&&this.fragment.unbind()},unrender:function(a){this.rendered&&(this.fragment&&this.fragment.unrender(a),this.rendered=!1)},update:function(){var a,b;this.fragmentToUnrender&&(this.fragmentToUnrender.unrender(!0),this.fragmentToUnrender=null),this.fragmentToRender&&(this.docFrag.appendChild(this.fragmentToRender.render()),this.fragmentToRender=null),this.rendered&&(a=this.parentFragment.getNode(),b=this.parentFragment.findNextNode(this),a.insertBefore(this.docFrag,b))}},Qo=So,Ro=new Ab("detach"),To=Uo,Vo=Wo,Xo=Yo,Zo=$o,_o=ap,bp=cp,dp=function(a,b,c,d){var e=a.root,f=a.keypath;d?e.viewmodel.smartUpdate(f,b,d):e.viewmodel.mark(f)},ep=[],fp=["pop","push","reverse","shift","sort","splice","unshift"],fp.forEach(function(a){var b=function(){var b,c,d,e,f,g,h;for(b=arguments.length,c=Array(b),d=0;b>d;d++)c[d]=arguments[d];for(e=vd(this,a,c),f=Array.prototype[a].apply(this,arguments),cc.start(),this._ractive.setting=!0,h=this._ractive.wrappers.length;h--;)g=this._ractive.wrappers[h],cc.addRactive(g.root),dp(g,this,a,e);return cc.end(),this._ractive.setting=!1,f};z(ep,a,{value:b})}),gp={},gp.__proto__?(hp=function(a){a.__proto__=ep},ip=function(a){a.__proto__=Array.prototype}):(hp=function(a){var b,c;for(b=fp.length;b--;)c=fp[b],z(a,c,{value:ep[c],configurable:!0})},ip=function(a){var b;for(b=fp.length;b--;)delete a[fp[b]]}),hp.unpatch=ip,jp=hp,kp={filter:function(a){return H(a)&&(!a._ractive||!a._ractive.setting)},wrap:function(a,b,c){return new lp(a,b,c)}},lp=function(a,b,c){this.root=a,this.value=b,this.keypath=nb(c),b._ractive||(z(b,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),jp(b)),b._ractive.instances[a._guid]||(b._ractive.instances[a._guid]=0,b._ractive.instances.push(a)),b._ractive.instances[a._guid]+=1,b._ractive.wrappers.push(this)},lp.prototype={get:function(){return this.value},teardown:function(){var a,b,c,d,e;if(a=this.value,b=a._ractive,c=b.wrappers,d=b.instances,b.setting)return!1;if(e=c.indexOf(this),-1===e)throw new Error(mp);if(c.splice(e,1),c.length){if(d[this.root._guid]-=1,!d[this.root._guid]){if(e=d.indexOf(this.root),-1===e)throw new Error(mp);d.splice(e,1)}}else delete a._ractive,jp.unpatch(this.value)}},mp="Something went wrong in a rather interesting way",np=/^\s*[0-9]+\s*$/,op=function(a){return np.test(a)?[]:{}};try{Object.defineProperty({},"test",{value:0}),pp={filter:function(a,b,c){var d,e;return b?(b=nb(b),(d=c.viewmodel.wrapped[b.parent.str])&&!d.magic?!1:(e=c.viewmodel.get(b.parent),H(e)&&/^[0-9]+$/.test(b.lastKey)?!1:e&&("object"==typeof e||"function"==typeof e))):!1},wrap:function(a,b,c){return new qp(a,b,c)}},qp=function(a,b,c){var d,e,f;return c=nb(c),this.magic=!0,this.ractive=a,this.keypath=c,this.value=b,this.prop=c.lastKey,d=c.parent,this.obj=d.isRoot?a.viewmodel.data:a.viewmodel.get(d),e=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop),e&&e.set&&(f=e.set._ractiveWrappers)?(-1===f.indexOf(this)&&f.push(this),void 0):(rp(this,b,e),void 0)},qp.prototype={get:function(){return this.value},reset:function(a){return this.updating?void 0:(this.updating=!0,this.obj[this.prop]=a,cc.addRactive(this.ractive),this.ractive.viewmodel.mark(this.keypath,{keepExistingWrapper:!0}),this.updating=!1,!0)},set:function(a,b){this.updating||(this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=op(a),this.updating=!1),this.obj[this.prop][a]=b)},teardown:function(){var a,b,c,d,e;return this.updating?!1:(a=Object.getOwnPropertyDescriptor(this.obj,this.prop),b=a&&a.set,b&&(d=b._ractiveWrappers,e=d.indexOf(this),-1!==e&&d.splice(e,1),d.length||(c=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=c)),void 0)}}}catch(B){pp=!1}if(pp&&(sp={filter:function(a,b,c){return pp.filter(a,b,c)&&kp.filter(a)},wrap:function(a,b,c){return new tp(a,b,c)}},tp=function(a,b,c){this.value=b,this.magic=!0,this.magicWrapper=pp.wrap(a,b,c),this.arrayWrapper=kp.wrap(a,b,c)},tp.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(a){return this.magicWrapper.reset(a)}}),up=wp,vp={},Dp=Ep,Jp=Kp,Lp=Mp,Np=function(a,b){this.computation=a,this.viewmodel=a.viewmodel,this.ref=b,this.root=this.viewmodel.ractive,this.parentFragment=this.root.component&&this.root.component.parentFragment},Np.prototype={resolve:function(a){this.computation.softDeps.push(a),this.computation.unresolvedDeps[a.str]=null,this.viewmodel.register(a,this.computation,"computed")}},Op=function(a,b){this.key=a,this.getter=b.getter,this.setter=b.setter,this.hardDeps=b.deps||[],this.softDeps=[],this.unresolvedDeps={},this.depValues={},this._dirty=this._firstRun=!0},Op.prototype={constructor:Op,init:function(a){var c,b=this;this.viewmodel=a,this.bypass=!0,c=a.get(this.key),a.clearCache(this.key.str),this.bypass=!1,this.setter&&void 0!==c&&this.set(c),this.hardDeps&&this.hardDeps.forEach(function(c){return a.register(c,b,"computed")})},invalidate:function(){this._dirty=!0},get:function(){var b,c,e,a=this,d=!1;if(this.getting)return e="The "+this.key.str+" computation indirectly called itself. This probably indicates a bug in the computation. It is commonly caused by `array.sort(...)` - if that's the case, clone the array first with `array.slice().sort(...)`",V(e),this.value;if(this.getting=!0,this._dirty){if(this._firstRun||!this.hardDeps.length&&!this.softDeps.length?d=!0:[this.hardDeps,this.softDeps].forEach(function(b){var c,e,f;if(!d)for(f=b.length;f--;)if(c=b[f],e=a.viewmodel.get(c),!J(e,a.depValues[c.str]))return a.depValues[c.str]=e,d=!0,void 0}),d){this.viewmodel.capture();try{this.value=this.getter()}catch(f){W('Failed to compute "%s"',this.key.str),T(f.stack||f),this.value=void 0}b=this.viewmodel.release(),c=this.updateDependencies(b),c&&[this.hardDeps,this.softDeps].forEach(function(b){b.forEach(function(b){a.depValues[b.str]=a.viewmodel.get(b)})})}this._dirty=!1}return this.getting=this._firstRun=!1,this.value},set:function(a){if(this.setting)return this.value=a,void 0;if(!this.setter)throw new Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)");this.setter(a)},updateDependencies:function(a){var b,c,d,e,f;for(c=this.softDeps,b=c.length;b--;)d=c[b],-1===a.indexOf(d)&&(e=!0,this.viewmodel.unregister(d,this,"computed"));for(b=a.length;b--;)d=a[b],-1!==c.indexOf(d)||this.hardDeps&&-1!==this.hardDeps.indexOf(d)||(e=!0,Pp(this.viewmodel,d)&&!this.unresolvedDeps[d.str]?(f=new Np(this,d.str),a.splice(b,1),this.unresolvedDeps[d.str]=f,cc.addUnresolved(f)):this.viewmodel.register(d,this,"computed"));return e&&(this.softDeps=a.slice()),e}},Qp=Rp,Sp={FAILED_LOOKUP:!0},Tp=Vp,Up={},Xp=Yp,Zp=$p,_p=function(a,b){this.localKey=a,this.keypath=b.keypath,this.origin=b.origin,this.deps=[],this.unresolved=[],this.resolved=!1},_p.prototype={forceResolution:function(){this.keypath=this.localKey,this.setup()},get:function(a,b){return this.resolved?this.origin.get(this.map(a),b):void 0},getValue:function(){return this.keypath?this.origin.get(this.keypath):void 0},initViewmodel:function(a){this.local=a,this.setup()},map:function(a){return void 0===typeof this.keypath?this.localKey:a.replace(this.localKey,this.keypath)},register:function(a,b,c){this.deps.push({keypath:a,dep:b,group:c}),this.resolved&&this.origin.register(this.map(a),b,c)},resolve:function(a){void 0!==this.keypath&&this.unbind(!0),this.keypath=a,this.setup()},set:function(a,b){this.resolved||this.forceResolution(),this.origin.set(this.map(a),b)},setup:function(){var a=this;void 0!==this.keypath&&(this.resolved=!0,this.deps.length&&(this.deps.forEach(function(b){var c=a.map(b.keypath);if(a.origin.register(c,b.dep,b.group),b.dep.setValue)b.dep.setValue(a.origin.get(c));else{if(!b.dep.invalidate)throw new Error("An unexpected error occurred. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");b.dep.invalidate()}}),this.origin.mark(this.keypath)))},setValue:function(a){if(!this.keypath)throw new Error("Mapping does not have keypath, cannot set value. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");this.origin.set(this.keypath,a)},unbind:function(a){var b=this;a||delete this.local.mappings[this.localKey],this.resolved&&(this.deps.forEach(function(a){b.origin.unregister(b.map(a.keypath),a.dep,a.group)}),this.tracker&&this.origin.unregister(this.keypath,this.tracker))},unregister:function(a,b,c){var d,e;if(this.resolved){for(d=this.deps,e=d.length;e--;)if(d[e].dep===b){d.splice(e,1);break}this.origin.unregister(this.map(a),b,c)}}},aq=bq,cq=function(a,b){var c,d,e,f;return c={},d=0,e=a.map(function(a,e){var g,h,i;h=d,i=b.length;do{if(g=b.indexOf(a,h),-1===g)return f=!0,-1;h=g+1}while(c[g]&&i>h);return g===d&&(d+=1),g!==e&&(f=!0),c[g]=!0,g})},dq=fq,eq={},iq=jq,lq=mq,nq=oq,pq=qq,sq=vq,tq={implicit:!0},uq={noCascade:!0},xq=yq,zq=Aq,Cq=function(a){var g,h,b=a.adapt,c=a.data,d=a.ractive,e=a.computed,f=a.mappings;this.ractive=d,this.adaptors=b,this.onchange=a.onchange,this.cache={},this.cacheMap=y(null),this.deps={computed:y(null),"default":y(null)},this.depsMap={computed:y(null),"default":y(null)},this.patternObservers=[],this.specials=y(null),this.wrapped=y(null),this.computations=y(null),this.captureGroups=[],this.unresolvedImplicitDependencies=[],this.changes=[],this.implicitChanges={},this.noCascade={},this.data=c,this.mappings=y(null);for(g in f)this.map(nb(g),f[g]);if(c)for(g in c)(h=this.mappings[g])&&void 0===h.getValue()&&h.setValue(c[g]);for(g in e)f&&g in f&&S("Cannot map to a computed property ('%s')",g),this.compute(nb(g),e[g]);this.ready=!0},Cq.prototype={adapt:up,applyChanges:Dp,capture:Jp,clearCache:Lp,compute:Qp,get:Tp,init:Xp,map:Zp,mark:aq,merge:dq,register:iq,release:lq,reset:nq,set:pq,smartUpdate:sq,teardown:xq,unregister:zq},Dq.prototype={constructor:Dq,begin:function(a){this.inProcess[a._guid]=!0},end:function(a){var b=a.parent;b&&this.inProcess[b._guid]?Eq(this.queue,b).push(a):Fq(this,a),delete this.inProcess[a._guid]}},Gq=/\$\{([^\}]+)\}/g,Lq=new Ab("construct"),Mq=new Ab("config"),Nq=new Dq("init"),Oq=0,Pq=["adaptors","components","decorators","easing","events","interpolators","partials","transitions"],Qq=Rq,Wq.prototype={bubble:function(){this.dirty||(this.dirty=!0,cc.addView(this))},update:function(){this.callback(this.fragment.getValue()),this.dirty=!1},rebind:function(a,b){this.fragment.rebind(a,b)},unbind:function(){this.fragment.unbind()}},Xq=function(a,b,c,d,e){var f,g,h,i,j,n,k={},l={},m={},o=[];for(g=a.parentFragment,h=a.root,e=e||{},C(k,e),e.content=d||[],k[""]=e.content,b.defaults.el&&W("The <%s/> component has a default `el` property; it has been disregarded",a.name),i=g;i;){if(i.owner.type===ue){j=i.owner.container;break}i=i.parent}return c&&Object.keys(c).forEach(function(b){var e,g,d=c[b];if("string"==typeof d)e=mh(d),l[b]=e?e.value:d;else if(0===d)l[b]=!0;else{if(!H(d))throw new Error("erm wut");Zq(d)?(m[b]={origin:a.root.viewmodel,keypath:void 0},g=Yq(a,d[0],function(a){a.isSpecial?n?f.set(b,a.value):(l[b]=a.value,delete m[b]):n?f.viewmodel.mappings[b].resolve(a):m[b].keypath=a})):g=new Wq(a,d,function(a){n?f.set(b,a):l[b]=a}),o.push(g)}}),f=y(b.prototype),Qq(f,{el:null,append:!0,data:l,partials:e,magic:h.magic||b.defaults.magic,modifyArrays:h.modifyArrays,adapt:h.adapt},{parent:h,component:a,container:j,mappings:m,inlinePartials:k,cssIds:g.cssIds}),n=!0,a.resolvers=o,f},ar=function(a){var b,c;for(b=a.root;b;)(c=b._liveComponentQueries["_"+a.name])&&c.push(a.instance),b=b.parent},br=cr,dr=er,fr=gr,hr=ir,jr=lr,kr=new Ab("teardown"),nr=or,pr=function(a,b){this.init(a,b)},pr.prototype={detach:Qo,find:To,findAll:Vo,findAllComponents:Xo,findComponent:Zo,findNextNode:_o,firstNode:bp,init:br,rebind:dr,render:fr,toString:hr,unbind:jr,unrender:nr},qr=pr,rr=function(a){this.type=pe,this.value=a.template.c},rr.prototype={detach:Vi,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createComment(this.value)),this.node},toString:function(){return"<!--"+this.value+"-->"},unrender:function(a){a&&this.node.parentNode.removeChild(this.node)}},sr=function(a){var b,c,d,e;this.type=ue,this.container=b=a.parentFragment.root,this.component=c=b.component,this.container=b,this.containerFragment=a.parentFragment,this.parentFragment=c.parentFragment,d=this.name=a.template.n||"",e=b._inlinePartials[d],e||(W('Could not find template for partial "'+d+'"',{ractive:a.root}),e=[]),this.fragment=new Kr({owner:this,root:b.parent,template:e,pElement:this.containerFragment.pElement}),H(c.yielders[d])?c.yielders[d].push(this):c.yielders[d]=[this],cc.scheduleTask(function(){if(c.yielders[d].length>1)throw new Error("A component template can only have one {{yield"+(d?" "+d:"")+"}} declaration at a time")
    })},sr.prototype={detach:function(){return this.fragment.detach()},find:function(a){return this.fragment.find(a)},findAll:function(a,b){return this.fragment.findAll(a,b)},findComponent:function(a){return this.fragment.findComponent(a)},findAllComponents:function(a,b){return this.fragment.findAllComponents(a,b)},findNextNode:function(){return this.containerFragment.findNextNode(this)},firstNode:function(){return this.fragment.firstNode()},getValue:function(a){return this.fragment.getValue(a)},render:function(){return this.fragment.render()},unbind:function(){this.fragment.unbind()},unrender:function(a){this.fragment.unrender(a),Gb(this.component.yielders[this.name],this)},rebind:function(a,b){this.fragment.rebind(a,b)},toString:function(){return this.fragment.toString()}},tr=function(a){this.declaration=a.template.a},tr.prototype={init:M,render:M,unrender:M,teardown:M,toString:function(){return"<!DOCTYPE"+this.declaration+">"}},ur=vr,xr=yr,zr=Ar,Br=Cr,Fr=Gr,Ir=Jr,Kr=function(a){this.init(a)},Kr.prototype={bubble:yi,detach:Ai,find:Ci,findAll:Ei,findAllComponents:Gi,findComponent:Ii,findNextNode:Ki,firstNode:Mi,getArgsList:Pi,getNode:Ri,getValue:Ti,init:ur,rebind:xr,registerIndexRef:function(a){var b=this.registeredIndexRefs;-1===b.indexOf(a)&&b.push(a)},render:zr,toString:Br,unbind:Fr,unregisterIndexRef:function(a){var b=this.registeredIndexRefs;b.splice(b.indexOf(a),1)},unrender:Ir},Lr=Or,Mr=["template","partials","components","decorators","events"],Nr=new Ab("reset"),Pr=function(a,b){function e(b,c,d){d&&d.partials[a]||b.forEach(function(b){b.type===oe&&b.getPartialName()===a&&c.push(b),b.fragment&&e(b.fragment.items,c,d),H(b.fragments)?e(b.fragments,c,d):H(b.items)?e(b.items,c,d):b.type===te&&b.instance&&e(b.instance.fragment.items,c,b.instance),b.type===ne&&(H(b.attributes)&&e(b.attributes,c,d),H(b.conditionalAttributes)&&e(b.conditionalAttributes,c,d))})}var c,d=[];return e(this.fragment.items,d),this.partials[a]=b,c=cc.start(this,!0),d.forEach(function(b){b.value=void 0,b.setValue(a)}),cc.end(),c},Qr=Rr,Sr=yd("reverse"),Tr=Ur,Wr=yd("shift"),Xr=yd("sort"),Yr=yd("splice"),Zr=$r,_r=bs,as=new Ab("teardown"),ds=es,fs=gs,hs=js,is=new Ab("unrender"),ks=yd("unshift"),ls=ns,ms=new Ab("update"),os=ps,rs={add:ub,animate:mc,detach:qc,find:tc,findAll:Gc,findAllComponents:Ic,findComponent:Kc,findContainer:Mc,findParent:Oc,fire:Uc,get:Wc,insert:Zc,merge:bd,observe:jd,observeOnce:ld,off:pd,on:rd,once:td,pop:zd,push:Ad,render:Kd,reset:Lr,resetPartial:Pr,resetTemplate:Qr,reverse:Sr,set:Tr,shift:Wr,sort:Xr,splice:Yr,subtract:Zr,teardown:_r,toggle:ds,toHTML:fs,toHtml:fs,unrender:hs,unshift:ks,update:ls,updateModel:os},ss=function(a,b,c){return c||ts(a,b)?function(){var e,c="_super"in this,d=this._super;return this._super=b,e=a.apply(this,arguments),c&&(this._super=d),e}:a},us=vs,zs=As,Cs=function(a){var c,d,b={};return a&&(c=a._ractive)?(b.ractive=c.root,b.keypath=c.keypath.str,b.index={},(d=ej(c.proxy.parentFragment))&&(b.index=ej.resolve(d)),b):b},Ds=function(a){return this instanceof Ds?(Qq(this,a),void 0):new Ds(a)},Es={DEBUG:{writable:!0,value:!0},DEBUG_PROMISES:{writable:!0,value:!0},extend:{value:zs},getNodeInfo:{value:Cs},parse:{value:Qh},Promise:{value:Mb},svg:{value:j},magic:{value:h},VERSION:{value:"0.7.1"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:d},events:{writable:!0,value:{}},interpolators:{writable:!0,value:db},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}},A(Ds,Es),Ds.prototype=C(rs,c),Ds.prototype.constructor=Ds,Ds.defaults=Ds.prototype,Fs="function",typeof Date.now!==Fs||typeof String.prototype.trim!==Fs||typeof Object.keys!==Fs||typeof Array.prototype.indexOf!==Fs||typeof Array.prototype.forEach!==Fs||typeof Array.prototype.map!==Fs||typeof Array.prototype.filter!==Fs||"undefined"!=typeof window&&typeof window.addEventListener!==Fs)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");return Ds});